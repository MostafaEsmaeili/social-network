(this["webpackJsonpreact-client"]=this["webpackJsonpreact-client"]||[]).push([[0],{386:function(e,t,n){e.exports=n(662)},400:function(e,t,n){},662:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(28),o=n.n(i),c=n(34),l=n(342),s=n.n(l);n(394),n(397),n(398),n(399),n(400);function u(){var e=Object(c.g)().pathname;return Object(a.useEffect)((function(){window.scrollTo(0,0)}),[e]),null}var m=n(50),p=Object(m.a)(),d=n(8),b=n.n(d),f=n(12),v=n(673),h=n(23),g=n(32),O=n(375),w=n(689),E=n(376),y=n(139),j=n(26),C=("",""),x=(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_API_BASE_URL:""}).FACEBOOK_APP_ID,n(49)),S=n(9),k=n(374),A=n(13),P=n(80),I=n(11),L=(n(122),n(44)),U=n.n(L),T=n(344),F=n.n(T).a.create({baseURL:"".concat(C,"/api/"),withCredentials:!0,timeout:3e4});F.interceptors.request.use((function(e){var t=window.localStorage.getItem("SN_JWT_Token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)})),F.interceptors.response.use((function(e){return e}),(function(e){if("Network Error"!==e.message||e.response){var t=e.response,n=t.status,a=t.headers;throw 400===n?g.b.error("Bad request, Please check data"):401===n?(window.localStorage.removeItem("SN_JWT_Token"),a["www-authenticate"]&&a["www-authenticate"].indexOf("invalid_token")>=0&&(p.push("/Login"),g.b.info("Your session has expired, please login again"))):404===n?p.push("/notfound"):500===n&&g.b.error("Server Issue - Oops, something went wrong"),e.response}g.b.error("Network error server is down for maintenance, Please try after sometime")}));var z,D,N,R,H,M,V,G,_,q,B,W,J,Y,K,Z,$,Q,X,ee,te,ne,ae,re,ie,oe,ce,le,se,ue,me,pe,de,be,fe,ve,he,ge,Oe,we,Ee,ye,je,Ce,xe,Se,ke,Ae,Pe,Ie,Le,Ue,Te,Fe,ze,De,Ne,Re,He,Me,Ve,Ge,_e,qe,Be,We=function(e){return e.data},Je={get:function(){var e=Object(f.a)(b.a.mark((function e(t,n){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.get(t,{params:n});case 2:return a=e.sent,e.abrupt("return",We(a));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),post:function(){var e=Object(f.a)(b.a.mark((function e(t,n){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.post(t,n);case 2:return a=e.sent,e.abrupt("return",We(a));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),put:function(){var e=Object(f.a)(b.a.mark((function e(t,n){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.put(t,n);case 2:return a=e.sent,e.abrupt("return",We(a));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),delete:function(){var e=Object(f.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.delete(t);case 2:return n=e.sent,e.abrupt("return",We(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),postForm:function(){var e=Object(f.a)(b.a.mark((function e(t,n){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.post(t,n,{headers:{"Content-type":"multipart/form-data"}});case 2:return a=e.sent,e.abrupt("return",We(a));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},Ye={list:function(e){return Je.get("/activities",e)},details:function(e){return Je.get("/activities/".concat(e))},create:function(e){return Je.post("/activities",e)},update:function(e){return Je.put("/activities/".concat(e.id),e)},delete:function(e){return Je.delete("/activities/".concat(e))},attend:function(e){return Je.post("/activities/".concat(e,"/attend"),{})},unattend:function(e){return Je.post("/activities/".concat(e,"/unattend"),{})},getComments:function(e){return Je.get("/activities/".concat(e,"/comments"))}},Ke=function(e,t){return{appUserId:e.appUserId,displayName:e.displayName,image:e.image,isHost:t}},Ze=function(e,t){return null!=e&&e.attendees.length>0?e.attendees.filter((function(e){return e.appUserId!==t.appUserId})):[]},$e=(z=function(){function e(t){var n=this;Object(x.a)(this,e),this.rootStore=void 0,Object(A.a)(this,"activityRegistry",D,this),Object(A.a)(this,"selectedActivity",N,this),Object(A.a)(this,"isLoadingActivity",R,this),Object(A.a)(this,"isLoadingActivities",H,this),Object(A.a)(this,"showForm",M,this),Object(A.a)(this,"isSaving",V,this),Object(A.a)(this,"isDeleting",G,this),Object(A.a)(this,"totalActivitiesCount",_,this),Object(A.a)(this,"currentPageNumber",q,this),Object(A.a)(this,"predicate",B,this),this.getActivity=function(e){return n.activityRegistry.get(e)},Object(A.a)(this,"setSelectedActivity",W,this),Object(A.a)(this,"setShowFormFlag",J,this),Object(A.a)(this,"setIsLoadingActivity",Y,this),Object(A.a)(this,"setIsSaving",K,this),Object(A.a)(this,"setIsDeleting",Z,this),Object(A.a)(this,"setIsLoadingActivities",$,this),Object(A.a)(this,"registerActivity",Q,this),Object(A.a)(this,"loadActivities",X,this),Object(A.a)(this,"loadActivity",ee,this),Object(A.a)(this,"createActivity",te,this),Object(A.a)(this,"editActivity",ne,this),Object(A.a)(this,"deleteActivity",ae,this),Object(A.a)(this,"attend",re,this),Object(A.a)(this,"unattend",ie,this),Object(A.a)(this,"getComments",oe,this),Object(A.a)(this,"addComment",ce,this),Object(A.a)(this,"onReceivingCommentFromServer",le,this),Object(A.a)(this,"setTotalActivityCount",se,this),Object(A.a)(this,"setPageNumber",ue,this),Object(A.a)(this,"setPredicate",me,this),this.getQSParams=function(){var e=new URLSearchParams;return e.append("offset",(2*n.currentPageNumber).toString()),e.append("limit",2..toString()),n.predicate.forEach((function(t,n){"startDate"===n?e.append(n,t.toISOString()):e.append(n,t.toString())})),e},this.groupActivitiesByDate=function(e){return Object.entries(e.reduce((function(e,t){var n=U()(t.date).format("MM-DD-yyyy");return e[n]=e[n]?[].concat(Object(k.a)(e[n]),[t]):[t],e}),{}))},this.getCurrentUser=function(){return n.rootStore.userStore.getCurrentUserInstance()},this.rootStore=t,Object(S.reaction)((function(){return n.predicate.keys()}),(function(){n.currentPageNumber=0,n.activityRegistry.clear(),n.loadActivities()}))}return Object(P.a)(e,[{key:"totalPages",get:function(){return Math.ceil(this.totalActivitiesCount/2)}},{key:"activityByDate",get:function(){var e=Array.from(this.activityRegistry.values()).sort((function(e,t){return e.date&&t.date?e.date.getTime()-t.date.getTime():e?1:0}));return this.groupActivitiesByDate(e)}}]),e}(),D=Object(I.a)(z.prototype,"activityRegistry",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),N=Object(I.a)(z.prototype,"selectedActivity",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=Object(I.a)(z.prototype,"isLoadingActivity",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),H=Object(I.a)(z.prototype,"isLoadingActivities",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),M=Object(I.a)(z.prototype,"showForm",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),V=Object(I.a)(z.prototype,"isSaving",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),G=Object(I.a)(z.prototype,"isDeleting",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_=Object(I.a)(z.prototype,"totalActivitiesCount",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),q=Object(I.a)(z.prototype,"currentPageNumber",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),B=Object(I.a)(z.prototype,"predicate",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),W=Object(I.a)(z.prototype,"setSelectedActivity",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.selectedActivity=t}}}),J=Object(I.a)(z.prototype,"setShowFormFlag",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.showForm=t}}}),Y=Object(I.a)(z.prototype,"setIsLoadingActivity",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.isLoadingActivity=t}}}),K=Object(I.a)(z.prototype,"setIsSaving",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.isSaving=t}}}),Z=Object(I.a)(z.prototype,"setIsDeleting",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.isDeleting=t}}}),$=Object(I.a)(z.prototype,"setIsLoadingActivities",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.isLoadingActivities=t}}}),Q=Object(I.a)(z.prototype,"registerActivity",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){t.date=new Date(t.date);var n=e.getCurrentUser();n&&(t.isCurrentUserGoing=function(e,t){return!!(null!=e&&e.attendees.length>0&&t)&&e.attendees.some((function(e){return e.appUserId===t.appUserId}))}(t,n),t.isCurrentUserHost=function(e,t){return!!(null!=e&&e.attendees.length>0&&t)&&e.attendees.some((function(e){return e.appUserId===t.appUserId&&!0===e.isHost}))}(t,n),t.host=function(e){if(null!=e&&e.attendees.length>0){var t=e.attendees.filter((function(e){return!0===e.isHost}));if(t.length>0)return t[0]}return null}(t)),e.activityRegistry.set(t.id,t)}}}),X=Object(I.a)(z.prototype,"loadActivities",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(f.a)(b.a.mark((function t(){var n,a,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.setIsLoadingActivities(!0),t.next=4,Ye.list(e.getQSParams());case 4:n=t.sent,a=n.count,(r=n.activities)&&r.forEach((function(t){e.registerActivity(t)})),e.setTotalActivityCount(a),e.setIsLoadingActivities(!1),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.error(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))}}),ee=Object(I.a)(z.prototype,"loadActivity",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(f.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n&&(!n||0!==n.length)){t.next=2;break}return t.abrupt("return");case 2:if(!(a=e.getActivity(n))){t.next=6;break}return e.setSelectedActivity(a),t.abrupt("return",a);case 6:return e.setIsLoadingActivity(!0),t.prev=7,t.next=10,Ye.details(n);case 10:return a=t.sent,e.registerActivity(a),e.setSelectedActivity(a),e.setIsLoadingActivity(!1),t.abrupt("return",a);case 17:t.prev=17,t.t0=t.catch(7),console.error(t.t0),e.setIsLoadingActivity(!1);case 21:case"end":return t.stop()}}),t,null,[[7,17]])})));return function(e){return t.apply(this,arguments)}}()}}),te=Object(I.a)(z.prototype,"createActivity",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(f.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setIsSaving(!0),t.prev=1,t.next=4,Ye.create(n);case 4:return n.id=t.sent,Object(S.runInAction)((function(){n.attendees=n.attendees||[],n.attendees.push(Ke(e.getCurrentUser(),!0))})),e.registerActivity(n),e.setIsSaving(!1),e.setShowFormFlag(!1),t.abrupt("return",n.id);case 12:t.prev=12,t.t0=t.catch(1),console.error(t.t0),e.setIsSaving(!1),e.setShowFormFlag(!1);case 17:return t.abrupt("return","");case 18:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}()}}),ne=Object(I.a)(z.prototype,"editActivity",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(f.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setIsSaving(!0),t.prev=1,t.next=4,Ye.update(n);case 4:return e.registerActivity(n),e.setIsSaving(!1),e.setShowFormFlag(!1),t.abrupt("return",!0);case 10:t.prev=10,t.t0=t.catch(1),console.error(t.t0),e.setIsSaving(!1),e.setShowFormFlag(!1);case 15:return t.abrupt("return",!1);case 16:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()}}),ae=Object(I.a)(z.prototype,"deleteActivity",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(f.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setIsDeleting(!0),t.prev=1,t.next=4,Ye.delete(n);case 4:Object(S.runInAction)((function(){e.activityRegistry.delete(n)})),e.setIsDeleting(!1),e.setShowFormFlag(!1),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0),e.setIsDeleting(!1),e.setShowFormFlag(!1);case 14:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}}),re=Object(I.a)(z.prototype,"attend",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(f.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ye.attend(n.id);case 3:Object(S.runInAction)((function(){n.attendees=n.attendees||[],n.attendees.push(Ke(e.getCurrentUser(),!1))})),e.registerActivity(n),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0),g.b.error("Problem signin up to activity, Please try again later!");case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}}),ie=Object(I.a)(z.prototype,"unattend",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(f.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ye.unattend(n.id);case 3:Object(S.runInAction)((function(){n.attendees=Ze(n,e.getCurrentUser())})),e.registerActivity(n),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0),g.b.error("Problem cancelling attendance, Please try again later!");case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}}),oe=Object(I.a)(z.prototype,"getComments",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(f.a)(b.a.mark((function t(){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.selectedActivity||!e.selectedActivity.comments){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,Ye.getComments(e.selectedActivity.id);case 5:n=t.sent,Object(S.runInAction)((function(){e.selectedActivity&&(e.selectedActivity.comments=n||[])})),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.error(t.t0),g.b.error("Problem fetching comments, Please try again later!");case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))}}),ce=Object(I.a)(z.prototype,"addComment",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(f.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.activityId=e.selectedActivity.id,t.prev=1,t.next=4,e.rootStore.activityHubStore.sendComment(n);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.error(t.t0);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}()}}),le=Object(I.a)(z.prototype,"onReceivingCommentFromServer",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n;null===(n=e.selectedActivity)||void 0===n||n.comments.push(t)}}}),se=Object(I.a)(z.prototype,"setTotalActivityCount",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.totalActivitiesCount=t}}}),ue=Object(I.a)(z.prototype,"setPageNumber",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.currentPageNumber=t}}}),me=Object(I.a)(z.prototype,"setPredicate",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,n){e.predicate.clear(),"all"!==t&&e.predicate.set(t,n)}}}),Object(I.a)(z.prototype,"totalPages",[S.computed],Object.getOwnPropertyDescriptor(z.prototype,"totalPages"),z.prototype),Object(I.a)(z.prototype,"activityByDate",[S.computed],Object.getOwnPropertyDescriptor(z.prototype,"activityByDate"),z.prototype),z),Qe=(pe=function(){function e(t){Object(x.a)(this,e),this.rootStore=void 0,Object(A.a)(this,"appLoaded",de,this),this.getToken=function(){return window.localStorage.getItem("SN_JWT_Token")},this.rootStore=t}return Object(P.a)(e,[{key:"setToken",value:function(e){e?window.localStorage.setItem("SN_JWT_Token",e):window.localStorage.removeItem("SN_JWT_Token")}},{key:"setAppLoaded",value:function(){this.appLoaded=!0}}]),e}(),de=Object(I.a)(pe.prototype,"appLoaded",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(I.a)(pe.prototype,"setToken",[S.action],Object.getOwnPropertyDescriptor(pe.prototype,"setToken"),pe.prototype),Object(I.a)(pe.prototype,"setAppLoaded",[S.action],Object.getOwnPropertyDescriptor(pe.prototype,"setAppLoaded"),pe.prototype),pe),Xe={current:function(){return Je.get("/user")},login:function(e){return Je.post("/user/login",e)},register:function(e){return Je.post("/user/register",e)}},et=(be=function(){function e(t){var n=this;Object(x.a)(this,e),this.rootStore=void 0,Object(A.a)(this,"user",fe,this),Object(A.a)(this,"setUser",ve,this),Object(A.a)(this,"login",he,this),Object(A.a)(this,"register",ge,this),Object(A.a)(this,"current",Oe,this),Object(A.a)(this,"logout",we,this),Object(A.a)(this,"fbResponseHandler",Ee,this),this.getCurrentUserInstance=function(){return Object(S.toJS)(n.user)},this.rootStore=t}return Object(P.a)(e,[{key:"setMainPhoto",value:function(e){this.user&&(this.user.image=e.url)}},{key:"setDisplayName",value:function(e){this.user&&(this.user.displayName=e)}},{key:"isUserLoggedIn",get:function(){return!!this.user}},{key:"canAccessSecureResource",get:function(){var e=this.rootStore.commonStore.getToken();return!!(this.isUserLoggedIn&&e&&e.length>0)}}]),e}(),fe=Object(I.a)(be.prototype,"user",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(I.a)(be.prototype,"isUserLoggedIn",[S.computed],Object.getOwnPropertyDescriptor(be.prototype,"isUserLoggedIn"),be.prototype),Object(I.a)(be.prototype,"canAccessSecureResource",[S.computed],Object.getOwnPropertyDescriptor(be.prototype,"canAccessSecureResource"),be.prototype),ve=Object(I.a)(be.prototype,"setUser",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.user=t}}}),he=Object(I.a)(be.prototype,"login",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(f.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.rootStore.commonStore.setToken(null),t.next=4,Xe.login(n);case 4:a=t.sent,e.setUser(a),e.rootStore.commonStore.setToken(a.token),t.next=12;break;case 9:throw t.prev=9,t.t0=t.catch(0),t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}}),ge=Object(I.a)(be.prototype,"register",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(f.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e.isUserLoggedIn){t.next=7;break}return t.next=4,Xe.register(n);case 4:a=t.sent,e.setUser(a),e.rootStore.commonStore.setToken(a.token);case 7:t.next=12;break;case 9:throw t.prev=9,t.t0=t.catch(0),t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}}),Oe=Object(I.a)(be.prototype,"current",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(f.a)(b.a.mark((function t(){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e.user){t.next=6;break}return t.next=4,Xe.current();case 4:n=t.sent,e.setUser(n);case 6:return t.abrupt("return",e.user);case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))}}),Object(I.a)(be.prototype,"setMainPhoto",[S.action],Object.getOwnPropertyDescriptor(be.prototype,"setMainPhoto"),be.prototype),Object(I.a)(be.prototype,"setDisplayName",[S.action],Object.getOwnPropertyDescriptor(be.prototype,"setDisplayName"),be.prototype),we=Object(I.a)(be.prototype,"logout",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.rootStore.commonStore.setToken(null),e.setUser(null),p.push("/")}}}),Ee=Object(I.a)(be.prototype,"fbResponseHandler",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(e){console.log(e)}}}),be),tt=n(116),nt={get:function(e){return Je.get("profile/".concat(e))},userActivities:function(e,t){return Je.get("profile/".concat(e,"/activities"),t)},followers:function(e){return Je.get("profile/".concat(e,"/followers"))},followings:function(e){return Je.get("profile/".concat(e,"/followings"))},update:function(e){return Je.put("profile/",e)},follow:function(e){return Je.post("profile/".concat(e,"/follow"),{})},unfollow:function(e){return Je.post("profile/".concat(e,"/unfollow"),{})}},at={upload:function(e){var t=new FormData;return t.append("File",e),Je.postForm("photo/",t)},setMain:function(e){return Je.post("photo/".concat(e,"/setmain"),e)},delete:function(e){return Je.delete("photo/".concat(e))}},rt=(ye=function(){function e(t){var n=this;Object(x.a)(this,e),this.rootStore=void 0,Object(A.a)(this,"userProfile",je,this),Object(A.a)(this,"activeTabIndex",Ce,this),Object(A.a)(this,"followers",xe,this),Object(A.a)(this,"isLoadingfollowers",Se,this),Object(A.a)(this,"userActivities",ke,this),Object(A.a)(this,"setActiveTab",Ae,this),Object(A.a)(this,"setUserProfile",Pe,this),Object(A.a)(this,"getUserProfile",Ie,this),Object(A.a)(this,"uploadPhoto",Le,this),Object(A.a)(this,"setMainPhoto",Ue,this),Object(A.a)(this,"deletePhoto",Te,this),Object(A.a)(this,"updateProfile",Fe,this),Object(A.a)(this,"follow",ze,this),Object(A.a)(this,"unfollow",De,this),Object(A.a)(this,"loadFollowers",Ne,this),Object(A.a)(this,"setUserActivities",Re,this),Object(A.a)(this,"loadUserActivities",He,this),this.rootStore=t,Object(S.reaction)((function(){return n.activeTabIndex}),(function(e){3===e?n.loadFollowers(n.userProfile.appUserId,"followers"):4===e?n.loadFollowers(n.userProfile.appUserId,"followings"):n.followers=void 0}))}return Object(P.a)(e,[{key:"isViewingOwnProfile",get:function(){var e,t;return!((null===(e=this.rootStore.userStore.user)||void 0===e?void 0:e.userName)!==(null===(t=this.userProfile)||void 0===t?void 0:t.username))}},{key:"isUserViewingFollowersTab",get:function(){return 3===this.activeTabIndex}},{key:"isUserViewingFollowingTab",get:function(){return 4===this.activeTabIndex}}]),e}(),je=Object(I.a)(ye.prototype,"userProfile",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ce=Object(I.a)(ye.prototype,"activeTabIndex",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),xe=Object(I.a)(ye.prototype,"followers",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Se=Object(I.a)(ye.prototype,"isLoadingfollowers",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ke=Object(I.a)(ye.prototype,"userActivities",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(I.a)(ye.prototype,"isViewingOwnProfile",[S.computed],Object.getOwnPropertyDescriptor(ye.prototype,"isViewingOwnProfile"),ye.prototype),Object(I.a)(ye.prototype,"isUserViewingFollowersTab",[S.computed],Object.getOwnPropertyDescriptor(ye.prototype,"isUserViewingFollowersTab"),ye.prototype),Object(I.a)(ye.prototype,"isUserViewingFollowingTab",[S.computed],Object.getOwnPropertyDescriptor(ye.prototype,"isUserViewingFollowingTab"),ye.prototype),Ae=Object(I.a)(ye.prototype,"setActiveTab",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.activeTabIndex=t}}}),Pe=Object(I.a)(ye.prototype,"setUserProfile",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.userProfile=t}}}),Ie=Object(I.a)(ye.prototype,"getUserProfile",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(f.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,nt.get(n);case 3:a=t.sent,e.setUserProfile(a),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0),g.b.error("Error loading user profile");case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}}),Le=Object(I.a)(ye.prototype,"uploadPhoto",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(f.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,at.upload(n);case 3:return a=t.sent,Object(S.runInAction)((function(){var t;null===(t=e.userProfile)||void 0===t||t.photos.push(a)})),t.abrupt("return",a);case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0),g.b.error("Error uploading photo");case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}}),Ue=Object(I.a)(ye.prototype,"setMainPhoto",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(f.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,at.setMain(n);case 3:Object(S.runInAction)((function(){var t,a;e.userProfile&&(e.userProfile.mainPhoto=null===(t=e.userProfile)||void 0===t||null===(a=t.photos)||void 0===a?void 0:a.filter((function(e){return e.id===n}))[0],e.rootStore.userStore.setMainPhoto(e.userProfile.mainPhoto))})),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),console.error(t.t0),g.b.error("Problem setting photo as main");case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}}),Te=Object(I.a)(ye.prototype,"deletePhoto",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(f.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,at.delete(n);case 3:Object(S.runInAction)((function(){e.userProfile.photos=e.userProfile.photos.filter((function(e){return e.id!==n}))})),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),console.error(t.t0),g.b.error("Problem deleting photo");case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}}),Fe=Object(I.a)(ye.prototype,"updateProfile",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(f.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,nt.update(n);case 3:a=t.sent,Object(S.runInAction)((function(){e.rootStore.userStore.setDisplayName(a),e.userProfile=Object(tt.a)(Object(tt.a)({},e.userProfile),n),e.userProfile.displayName=a})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0),g.b.error("Problem updating user profile");case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}}),ze=Object(I.a)(ye.prototype,"follow",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(f.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,nt.follow(n);case 3:a=t.sent,Object(S.runInAction)((function(){var t;(e.userProfile.followersCount+=1,e.userProfile.following=!0,e.isUserViewingFollowersTab)&&(e.followers=null!==(t=e.followers)&&void 0!==t?t:[],e.followers.push(a))})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0),g.b.error("Problem following user");case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}}),De=Object(I.a)(ye.prototype,"unfollow",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(f.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,nt.unfollow(n);case 3:Object(S.runInAction)((function(){var t;(e.userProfile.followersCount-=1,e.userProfile.following=!1,e.isUserViewingFollowersTab)&&(e.followers=null===(t=e.followers)||void 0===t?void 0:t.filter((function(t){var n;return t.appUserId!==(null===(n=e.rootStore.userStore.user)||void 0===n?void 0:n.appUserId)})))})),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),console.error(t.t0),g.b.error("Problem unfollowing user");case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}}),Ne=Object(I.a)(ye.prototype,"loadFollowers",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(f.a)(b.a.mark((function t(n,a){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e.isLoadingfollowers=!0,r=void 0,"followers"!==a){t.next=9;break}return t.next=6,nt.followers(n);case 6:r=t.sent,t.next=12;break;case 9:return t.next=11,nt.followings(n);case 11:r=t.sent;case 12:Object(S.runInAction)((function(){e.followers=r&&r.length>0?r:void 0,e.isLoadingfollowers=!1})),t.next=20;break;case 15:t.prev=15,t.t0=t.catch(0),console.error(t.t0),g.b.error("Problem loading followers"),e.isLoadingfollowers=!1;case 20:return t.abrupt("return",null);case 21:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e,n){return t.apply(this,arguments)}}()}}),Re=Object(I.a)(ye.prototype,"setUserActivities",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.userActivities=t}}}),He=Object(I.a)(ye.prototype,"loadUserActivities",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(f.a)(b.a.mark((function t(n,a){var r,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,(r=new URLSearchParams).set("Predicate",a),t.next=5,nt.userActivities(n,r);case 5:i=t.sent,e.setUserActivities(i),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.error(t.t0),g.b.error("Problem loading user activities");case 13:return t.abrupt("return",null);case 14:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,n){return t.apply(this,arguments)}}()}}),ye),it=n(229),ot=(Me=S.observable.ref,Ve=function e(t){Object(x.a)(this,e),this.rootStore=void 0,Object(A.a)(this,"hubConnection",Ge,this),Object(A.a)(this,"createHubConnection",_e,this),Object(A.a)(this,"stopHubConnection",qe,this),Object(A.a)(this,"sendComment",Be,this),this.rootStore=t},Ge=Object(I.a)(Ve.prototype,"hubConnection",[Me],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_e=Object(I.a)(Ve.prototype,"createHubConnection",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.hubConnection=(new it.a).withUrl("".concat(C,"/activitychat"),{accessTokenFactory:function(){return e.rootStore.commonStore.getToken()}}).configureLogging(it.b.Information).build(),e.hubConnection.start().then((function(){var t;return null===(t=e.hubConnection)||void 0===t?void 0:t.state})).then((function(){var n;console.log("Attempting to join group ".concat(t)),"Connected"===e.hubConnection.state&&(null===(n=e.hubConnection)||void 0===n||n.invoke("AddToGroup",t))})).catch((function(e){return console.log("Error establishing a connection: ".concat(e))})),e.hubConnection.on("ReceiveComment",(function(t){e.rootStore.activityStore.onReceivingCommentFromServer(t)})),e.hubConnection.on("GroupNotification",(function(e){g.b.info(e)}))}}}),qe=Object(I.a)(Ve.prototype,"stopHubConnection",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.hubConnection.invoke("RemoveFromGroup",t).then((function(){e.hubConnection.stop()})).then((function(){console.log("Connection stopped")})).catch((function(e){return console.log("Error establishing a connection: ".concat(e))}))}}}),Be=Object(I.a)(Ve.prototype,"sendComment",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(f.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.hubConnection.invoke("SendComment",n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),Ve);Object(S.configure)({enforceActions:"always"});var ct,lt=Object(a.createContext)(new function e(){Object(x.a)(this,e),this.activityStore=void 0,this.userStore=void 0,this.commonStore=void 0,this.profileStore=void 0,this.activityHubStore=void 0,this.activityStore=new $e(this),this.userStore=new et(this),this.commonStore=new Qe(this),this.profileStore=new rt(this),this.activityHubStore=new ot(this)}),st=Object(h.a)((function(){var e,t,n,i=Object(a.useContext)(lt).userStore;return r.a.createElement(O.a,{fixed:"top",inverted:!0},r.a.createElement(v.a,null,r.a.createElement(O.a.Item,{header:!0,as:j.b,to:"".concat("/"),exact:!0},r.a.createElement("img",{src:"/assets/logo.png",alt:"logo"}),"Social Network"),i.isUserLoggedIn&&i.user&&r.a.createElement(a.Fragment,null,r.a.createElement(O.a.Item,{name:"Activities",as:j.b,to:"".concat("/activities")}),r.a.createElement(O.a.Item,null,r.a.createElement(w.a,{as:j.b,to:"".concat("/createactivity"),content:"Create Activity",positive:!0})),r.a.createElement(O.a.Item,{position:"right"},r.a.createElement(E.a,{avatar:!0,spaced:"right",src:(null===(e=i.user)||void 0===e?void 0:e.image)||"/assets/user.png"}),r.a.createElement(y.a,{pointing:"top left",text:null===(t=i.user)||void 0===t?void 0:t.displayName},r.a.createElement(y.a.Menu,null,r.a.createElement(y.a.Item,{as:j.a,to:"".concat("/profile","/").concat(null===(n=i.user)||void 0===n?void 0:n.appUserId),text:"My profile",icon:"user"}),r.a.createElement(y.a.Item,{onClick:function(){return i.logout()},text:"Logout",icon:"power"})))))))})),ut=n(230),mt=n(692),pt=Object(h.a)((function(){var e=Object(a.useContext)(lt),t=e.userStore,n=e.commonStore;return r.a.createElement(ut.a,{inverted:!0,textAlign:"center",vertical:!0,className:"masthead"},r.a.createElement(v.a,{text:!0},r.a.createElement(mt.a,{as:"h1",inverted:!0},r.a.createElement(E.a,{size:"massive",src:"/assets/logo.png",alt:"logo",style:{marginBottom:12}}),"Social Network"),!0===t.isUserLoggedIn&&n.getToken()?r.a.createElement(a.Fragment,null,r.a.createElement(mt.a,{as:"h2",inverted:!0,content:"Welcome back ".concat(t.user.displayName)}),r.a.createElement(w.a,{as:j.a,to:"/activities",size:"huge",inverted:!0},"Go to activities!")):r.a.createElement(a.Fragment,null,r.a.createElement(w.a,{as:j.a,to:"/Login",size:"huge",inverted:!0},"Login"),r.a.createElement(w.a,{as:j.a,to:"/Register",size:"huge",inverted:!0},"Register"))))})),dt=n(377),bt=n(358),ft=n.n(bt),vt=n(31),ht=n(185),gt=n(684),Ot=n(85),wt=n(685),Et=n(683),yt={borderColor:"orange",borderWidth:2},jt=function(e){var t=e.attendees;return r.a.createElement(wt.a,{horizontal:!0},null===t||void 0===t?void 0:t.map((function(e){var t=e.image||"/assets/user.png";return r.a.createElement(wt.a.Item,{key:e.appUserId},r.a.createElement(Et.a,{header:e.displayName,trigger:r.a.createElement(E.a,{src:t,size:"mini",circular:!0,bordered:!0,style:e.following?yt:null})}))})))},Ct=function(e){var t,n,a,i=e.activity;return r.a.createElement(ut.a.Group,null,r.a.createElement(ut.a,null,r.a.createElement(gt.a.Group,null,r.a.createElement(gt.a,null,r.a.createElement(gt.a.Image,{size:"tiny",circular:!0,src:(null===(t=i.host)||void 0===t?void 0:t.image)||"/assets/user.png",style:{marginBottom:3}}),r.a.createElement(gt.a.Content,null,r.a.createElement(gt.a.Header,{as:j.a,to:"".concat("/activities","/").concat(i.id)},i.title),r.a.createElement(gt.a.Description,null,"Hosted by "," ",r.a.createElement(j.a,{to:"".concat("/profile","/").concat(null===(n=i.host)||void 0===n?void 0:n.appUserId)},null===(a=i.host)||void 0===a?void 0:a.displayName)),i.isCurrentUserHost&&r.a.createElement(gt.a.Description,null,r.a.createElement(ht.a,{basic:!0,color:"orange",content:"You are hosting this activity"})),i.isCurrentUserGoing&&!i.isCurrentUserHost&&r.a.createElement(gt.a.Description,null,r.a.createElement(ht.a,{basic:!0,color:"green",content:"You are going to this activity"})))))),r.a.createElement(ut.a,null,r.a.createElement(Ot.a,{name:"clock"}),U()(i.date).format("h:mm A"),r.a.createElement(Ot.a,{name:"marker"}),i.venue,", ",i.city),r.a.createElement(ut.a,{secondary:!0},r.a.createElement(jt,{attendees:i.attendees})),r.a.createElement(ut.a,{clearing:!0},r.a.createElement("span",null,i.description),r.a.createElement(w.a,{as:j.a,to:"".concat("/activities","/").concat(i.id),name:i.id,content:"View",floated:"right",color:"blue"})))},xt=Object(h.a)((function(){var e=Object(a.useContext)(lt).activityStore;return r.a.createElement(a.Fragment,null,e.activityByDate.map((function(e){var t=Object(vt.a)(e,2),n=t[0],i=t[1];return r.a.createElement(a.Fragment,{key:n},r.a.createElement(ht.a,{size:"large",color:"blue"},n),r.a.createElement(gt.a.Group,{divided:!0},i.map((function(e){return r.a.createElement(Ct,{key:e.id,activity:e})}))))})))})),St=n(676),kt=function(e){var t=e.message,n=e.loading;return r.a.createElement(St.a,{active:n,inline:"centered"},t)},At=n(184),Pt=Object(h.a)((function(){var e=Object(a.useContext)(lt).activityStore,t=e.setPredicate,n=e.predicate;return r.a.createElement(a.Fragment,null,r.a.createElement(O.a,{vertical:!0,size:"large",style:{width:"100%",marginTop:50}},r.a.createElement(mt.a,{icon:"filter",attached:!0,color:"teal",content:"Filters"}),r.a.createElement(O.a.Item,{active:!n.has("isGoing")&&!n.has("isHost"),onClick:function(){return t("all","true")},color:"blue",name:"all",content:"All Activities"}),r.a.createElement(O.a.Item,{active:n.has("isGoing"),onClick:function(){return t("isGoing","true")},color:"blue",name:"username",content:"I'm Going"}),r.a.createElement(O.a.Item,{active:n.has("isHost"),onClick:function(){return t("isHost","true")},color:"blue",name:"host",content:"I'm hosting"})),r.a.createElement(mt.a,{icon:"calendar",attached:!0,color:"teal",content:"Select Date"}),r.a.createElement(At.Calendar,{onChange:function(e){return t("startDate",e)},value:n.get("startDate")||new Date}))})),It=n(687),Lt=function(){return r.a.createElement(a.Fragment,null,r.a.createElement(It.a,{fluid:!0,style:{marginTop:50}},r.a.createElement(ut.a.Group,null,r.a.createElement(ut.a,{style:{minHeight:110}},r.a.createElement(It.a,null,r.a.createElement(It.a.Header,{image:!0},r.a.createElement(It.a.Line,null),r.a.createElement(It.a.Line,null)),r.a.createElement(It.a.Paragraph,null,r.a.createElement(It.a.Line,null)))),r.a.createElement(ut.a,null,r.a.createElement(It.a,null,r.a.createElement(It.a.Line,null),r.a.createElement(It.a.Line,null))),r.a.createElement(ut.a,{secondary:!0,style:{minHeight:70}}),r.a.createElement(ut.a,{clearing:!0},r.a.createElement(w.a,{disabled:!0,color:"blue",floated:"right",content:"View"})))))},Ut=Object(h.a)((function(){var e=Object(a.useContext)(lt).activityStore,t=e.loadActivities,n=e.isLoadingActivities,i=e.setPageNumber,o=e.currentPageNumber,c=e.totalPages;Object(a.useEffect)((function(){(function(){var e=Object(f.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]);var l=function(){var e=Object(f.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(o+1),e.next=3,t();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(dt.a,null,r.a.createElement(dt.a.Column,{width:10},n&&0===o?r.a.createElement(Lt,null):r.a.createElement(ft.a,{pageStart:0,loadMore:l,hasMore:!n&&o+1<c,initialLoad:!1},r.a.createElement(xt,null))),r.a.createElement(dt.a.Column,{width:6},r.a.createElement(Pt,null)),r.a.createElement(dt.a.Column,{width:10},r.a.createElement(kt,{loading:n})))})),Tt=n(691),Ft=function(e){var t=e.message,n=void 0===t?"Loading":t,a=e.inverted,i=void 0===a||a;return r.a.createElement(Tt.a,{active:!0,inverted:i},r.a.createElement(St.a,{content:n}))},zt=n(682),Dt=n(679),Nt=n(27),Rt=function(e){var t=e.input,n=e.width,a=e.rows,i=e.placeholder,o=e.meta,c=o.touched,l=o.error;return r.a.createElement(Dt.a.Field,{error:c&&!!l,width:n},r.a.createElement("textarea",Object.assign({rows:a},t,{placeholder:i})),c&&l&&r.a.createElement(ht.a,{basic:!0,color:"red"},l))},Ht=Object(h.a)((function(){var e=Object(a.useContext)(lt),t=e.activityStore,n=t.addComment,i=t.selectedActivity,o=t.getComments,c=e.activityHubStore,l=c.createHubConnection,s=c.stopHubConnection,u=Object(a.useState)(!1),m=Object(vt.a)(u,2),p=m[0],d=m[1];return Object(a.useEffect)((function(){if(i)return l(i.id),function(){return s(i.id)}}),[l,s,i]),Object(a.useEffect)((function(){i&&function(){var e=Object(f.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,o();case 3:d(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[o,i]),p?r.a.createElement(kt,{message:"Loading Comment",loading:!0}):r.a.createElement(a.Fragment,null,r.a.createElement(ut.a,{textAlign:"center",attached:"top",inverted:!0,color:"teal",style:{border:"none"}},r.a.createElement(mt.a,null,"Chat about this event")),r.a.createElement(ut.a,{attached:!0},r.a.createElement(zt.a.Group,null,i&&i.comments&&i.comments.map((function(e){return r.a.createElement(zt.a,{key:e.id},r.a.createElement(zt.a.Avatar,{src:e.userImage||"/assets/user.png"}),r.a.createElement(zt.a.Content,null,r.a.createElement(zt.a.Author,{as:j.a,to:"".concat("/profile","/").concat(null===e||void 0===e?void 0:e.userId)},e.userDisplayName),r.a.createElement(zt.a.Metadata,null,r.a.createElement("div",null,U()(e.createdAt).format("dddd Do MMM")," at ",U()(e.createdAt).format("h:mm A"),"  ")),r.a.createElement(zt.a.Text,null,e.body)))})),r.a.createElement(Nt.b,{onSubmit:n,render:function(e){var t=e.handleSubmit,n=e.submitting,a=e.pristine,i=e.form;return r.a.createElement(Dt.a,{onSubmit:function(){return t().then((function(){return i.reset()}))}},r.a.createElement(Nt.a,{name:"Body",component:Rt,rows:2,placeholder:"Add your comment"}),r.a.createElement(w.a,{content:"Add Reply",labelPosition:"left",icon:"edit",primary:!0,loading:n,disabled:a}))}}))))})),Mt={filter:"brightness(30%)"},Vt={position:"absolute",bottom:"5%",left:"5%",width:"100%",height:"auto",color:"white"},Gt=Object(h.a)((function(e){var t,n,i=e.activity,o=Object(a.useContext)(lt),c=Object(a.useState)(!1),l=Object(vt.a)(c,2),s=l[0],u=l[1],m=function(){var e=Object(f.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,o.activityStore.attend(i);case 4:return e.prev=4,u(!1),e.finish(4);case 7:case"end":return e.stop()}}),e,null,[[1,,4,7]])})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(f.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,o.activityStore.unattend(i);case 4:return e.prev=4,u(!1),e.finish(4);case 7:case"end":return e.stop()}}),e,null,[[1,,4,7]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(ut.a.Group,null,r.a.createElement(ut.a,{basic:!0,attached:"top",style:{padding:"0"}},r.a.createElement(E.a,{src:"/assets/categoryImages/".concat(null===i||void 0===i?void 0:i.category,".jpg"),fluid:!0,style:Mt}),r.a.createElement(ut.a,{style:Vt,basic:!0},r.a.createElement(gt.a.Group,null,r.a.createElement(gt.a,null,r.a.createElement(gt.a.Content,null,r.a.createElement(mt.a,{size:"huge",content:null===i||void 0===i?void 0:i.title,style:{color:"white"}}),r.a.createElement("p",null,U()(null===i||void 0===i?void 0:i.date).format("dddd Do MMM")),r.a.createElement("p",null,"Hosted by"," ",r.a.createElement(j.a,{to:"".concat("/profile","/").concat(null===i||void 0===i||null===(t=i.host)||void 0===t?void 0:t.appUserId)},r.a.createElement("strong",null,null===i||void 0===i||null===(n=i.host)||void 0===n?void 0:n.displayName)))))))),r.a.createElement(ut.a,{clearing:!0,attached:"bottom"},!(null===i||void 0===i?void 0:i.isCurrentUserHost)&&!(null===i||void 0===i?void 0:i.isCurrentUserGoing)&&r.a.createElement(w.a,{loading:s,onClick:m,color:"teal"},"Join Activity"),!(null===i||void 0===i?void 0:i.isCurrentUserHost)&&(null===i||void 0===i?void 0:i.isCurrentUserGoing)&&r.a.createElement(w.a,{loading:s,onClick:p},"Cancel attendence"),(null===i||void 0===i?void 0:i.isCurrentUserHost)&&r.a.createElement(w.a,{as:j.a,to:"".concat("/manageactivity","/").concat(null===i||void 0===i?void 0:i.id),color:"orange",floated:"right"},"Manage Event")))})),_t=function(e){var t=e.activity;return r.a.createElement(ut.a.Group,null,r.a.createElement(ut.a,{attached:"top"},r.a.createElement(dt.a,null,r.a.createElement(dt.a.Column,{width:1},r.a.createElement(Ot.a,{size:"large",color:"teal",name:"info"})),r.a.createElement(dt.a.Column,{width:15},r.a.createElement("p",null,null===t||void 0===t?void 0:t.description)))),r.a.createElement(ut.a,{attached:!0},r.a.createElement(dt.a,{verticalAlign:"middle"},r.a.createElement(dt.a.Column,{width:1},r.a.createElement(Ot.a,{name:"calendar",size:"large",color:"teal"})),r.a.createElement(dt.a.Column,{width:15},r.a.createElement("span",null,U()(null===t||void 0===t?void 0:t.date).format("dddd Do MMM")," at ",U()(null===t||void 0===t?void 0:t.date).format("h:mm A"))))),r.a.createElement(ut.a,{attached:!0},r.a.createElement(dt.a,{verticalAlign:"middle"},r.a.createElement(dt.a.Column,{width:1},r.a.createElement(Ot.a,{name:"marker",size:"large",color:"teal"})),r.a.createElement(dt.a.Column,{width:11},r.a.createElement("span",null,null===t||void 0===t?void 0:t.venue,", ",null===t||void 0===t?void 0:t.city)))))},qt=Object(h.a)((function(e){var t=e.attendees;return r.a.createElement(a.Fragment,null,r.a.createElement(ut.a,{textAlign:"center",style:{border:"none"},attached:"top",secondary:!0,inverted:!0,color:"teal"},"".concat(null===t||void 0===t?void 0:t.length," ").concat((null===t||void 0===t?void 0:t.length)>1?"People":"Person"," going")),r.a.createElement(ut.a,{attached:!0},r.a.createElement(wt.a,{relaxed:!0,divided:!0},null===t||void 0===t?void 0:t.map((function(e){return r.a.createElement(gt.a,{key:e.appUserId,style:{position:"relative"}},e.isHost&&r.a.createElement(ht.a,{style:{position:"absolute"},color:"orange",ribbon:"right"},"Host"),r.a.createElement(E.a,{size:"tiny",src:e.image||"/assets/user.png"}),r.a.createElement(gt.a.Content,{verticalAlign:"middle"},r.a.createElement(gt.a.Header,{as:"h3"},r.a.createElement(j.a,{to:"".concat("/profile","/").concat(e.appUserId)},e.displayName)),e.following&&r.a.createElement(gt.a.Extra,{style:{color:"orange"}},"Following")))})))))})),Bt=Object(h.a)((function(e){var t=Object(a.useContext)(lt).activityStore,n=t.loadActivity,i=t.selectedActivity;return Object(a.useEffect)((function(){e.match.params.id&&e.match.params.id.length>0&&function(){var t=Object(f.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(e.match.params.id);case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[n,e.match.params.id]),t.isLoadingActivity?r.a.createElement(Ft,{message:"Loading Activity"}):r.a.createElement(dt.a,null,r.a.createElement(dt.a.Column,{width:10},r.a.createElement(Gt,{activity:i}),r.a.createElement(_t,{activity:i}),r.a.createElement(Ht,null)),r.a.createElement(dt.a.Column,{width:6},r.a.createElement(qt,{attendees:null===i||void 0===i?void 0:i.attendees})))})),Wt=n(115),Jt=n(20),Yt=function e(t){Object(x.a)(this,e),this.id=void 0,this.title="",this.description="",this.category="",this.date=void 0,this.time=void 0,this.city="",this.venue="",Object.assign(this,t),t&&t.date&&(this.time=t.date)},Kt=function(e,t){var n=e.getFullYear(),a=e.getMonth()+1,r=e.getDate(),i="".concat(n,"-").concat(a,"-").concat(r),o=t.getHours()+":"+t.getMinutes()+":00";return new Date(i+" "+o)},Zt=function(e){var t=e.input,n=e.width,a=e.type,i=e.placeholder,o=e.meta,c=o.touched,l=o.error;return r.a.createElement(Dt.a.Field,{error:c&&!!l,type:a,width:n},r.a.createElement("input",Object.assign({},t,{placeholder:i})),c&&l&&r.a.createElement(ht.a,{basic:!0,color:"red"},l))},$t=n(677),Qt=function(e){var t=e.input,n=e.options,a=e.width,i=e.placeholder,o=e.meta,c=o.touched,l=o.error;return r.a.createElement(Dt.a.Field,{error:c&&!!l,width:a},r.a.createElement($t.a,{placeholder:i,value:t.value,options:n,onChange:function(e,n){return t.onChange(n.value)}}),c&&l&&r.a.createElement(ht.a,{basic:!0,color:"red"},l))},Xt=function(e){var t=e.input,n=e.width,a=e.date,i=void 0!==a&&a,o=e.time,c=void 0!==o&&o,l=e.placeholder,s=e.meta,u=s.touched,m=s.error;Object(Wt.a)(e,["input","width","date","time","placeholder","meta"]);return r.a.createElement(Dt.a.Field,{error:u&&!!m,width:n},r.a.createElement(At.DateTimePicker,{placeholder:l,value:t.value||void 0,onChange:t.onChange,onBlur:t.onBlur,onKeyDown:function(e){return e.preventDefault()},date:i,time:c}),u&&m&&r.a.createElement(ht.a,{basic:!0,color:"red"},m))},en=[{key:"drinks",text:"Drinks",value:"drinks"},{key:"culture",text:"Culture",value:"culture"},{key:"film",text:"Film",value:"film"},{key:"food",text:"Food",value:"food"},{key:"music",text:"Music",value:"music"},{key:"travel",text:"Travel",value:"travel"}],tn=Object(Jt.combineValidators)({title:Object(Jt.isRequired)({message:"The Event title is required"}),description:Object(Jt.composeValidators)(Object(Jt.isRequired)("Description"),Object(Jt.hasLengthGreaterThan)(4)({message:"Description needs to be at least 5 characters"}))(),category:Object(Jt.isRequired)({message:"The Event category is required"}),date:Object(Jt.isRequired)("Date"),time:Object(Jt.isRequired)("Time"),city:Object(Jt.isRequired)("City"),venue:Object(Jt.isRequired)("Venue")}),nn=Object(h.a)((function(e){var t=Object(a.useContext)(lt).activityStore,n=t.loadActivity,i=Object(a.useState)(new Yt),o=Object(vt.a)(i,2),c=o[0],l=o[1];Object(a.useEffect)((function(){e.match.params.id&&n(e.match.params.id).then((function(e){l(new Yt(e))}))}),[n,e.match.params.id]);var s=function(e){p.push("".concat("/activities","/").concat(e))},u=function(){c.id?s(c.id):p.push("/activities")},m=function(){var e=Object(f.a)(b.a.mark((function e(n){var a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.date,n.time,(a=Object(Wt.a)(n,["date","time"])).date=Kt(n.date,n.time),!a.id){e.next=9;break}return e.next=5,t.editActivity(a);case 5:e.sent&&s(a.id),e.next=13;break;case 9:return e.next=11,t.createActivity(a);case 11:(r=e.sent)&&""!==r&&(a.id=r,s(r));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(dt.a,null,r.a.createElement(dt.a.Column,{width:10},r.a.createElement(ut.a,{clearing:!0},r.a.createElement(Nt.b,{onSubmit:m,validate:tn,initialValues:c,render:function(e){return r.a.createElement(Dt.a,{onSubmit:e.handleSubmit,loading:t.isLoadingActivity},r.a.createElement(Nt.a,{name:"title",placeholder:"Title",value:c.title,component:Zt}),r.a.createElement(Nt.a,{name:"description",placeholder:"Description",rows:3,value:c.description,component:Rt}),r.a.createElement(Nt.a,{name:"category",placeholder:"Category",value:c.category,component:Qt,options:en}),r.a.createElement(Dt.a.Group,{widths:"equal"},r.a.createElement(Nt.a,{component:Xt,name:"date",placeholder:"Date",date:!0,value:c.date}),r.a.createElement(Nt.a,{component:Xt,name:"time",placeholder:"Time",time:!0,value:c.time})),r.a.createElement(Nt.a,{name:"city",placeholder:"City",value:c.city,component:Zt}),r.a.createElement(Nt.a,{name:"venue",placeholder:"Venue",value:c.venue,component:Zt}),r.a.createElement(w.a,{floated:"right",type:"Submit",loading:t.isSaving,disabled:t.isLoadingActivity||e.invalid||e.pristine,positive:!0,content:"Submit"}),r.a.createElement(w.a,{onClick:u,floated:"right",type:"Button",disabled:t.isLoadingActivity,content:"Cancel"}))}}))))})),an=n(81),rn=n(60),on=n(680);!function(e){e.Mini="mini",e.Tiny="tiny",e.Small="small",e.Large="large",e.Fullscreen="fullscreen"}(ct||(ct={}));var cn=function(e){var t={trigger:e.trigger,content:e.content,title:e.title,actions:e.actions,closeIcon:e.closeIcon||!0,closeOnDocumentClick:e.closeOnDocumentClick||!1,closeOnDimmerClick:e.closeOnDocumentClick||!1,closeOnEscape:e.closeOnEscape||!1,open:e.open,size:e.size||ct.Large,defaultOpen:e.defaultOpen||!1,onClose:e.onClose,onOpen:e.onOpen,onActionClick:e.onActionClick};return r.a.createElement(on.a,{closeIcon:t.closeIcon,defaultOpen:t.defaultOpen,closeOnDimmerClick:t.closeOnDimmerClick,closeOnDocumentClick:t.closeOnDocumentClick,closeOnEscape:t.closeOnEscape,size:t.size,open:t.open,onOpen:function(e,n){t.onOpen&&t.onOpen(e,n)},onClose:function(e,n){e.preventDefault(),t.onClose&&t.onClose(e,n)},onActionClick:function(e,n){t.onActionClick&&t.onActionClick(e,n)}},t.title&&r.a.createElement(on.a.Header,null,t.title),r.a.createElement(on.a.Content,null,t.content),t.actions&&r.a.createElement(on.a.Actions,null,t.actions))},ln=n(688),sn=function(e){return r.a.createElement(ln.a,{negative:!0},r.a.createElement(ln.a.Header,null,e.error.statusText),e.error.data&&Object.keys(e.error.data).length>0&&r.a.createElement(ln.a.List,null,Object.values(e.error.data.errors).flat().map((function(e,t){return r.a.createElement(ln.a.Item,{key:t},e)}))),e.text&&r.a.createElement(ln.a.Content,null,e.text))},un=function(){var e=Object(a.useContext)(lt).userStore,t=Object(Jt.combineValidators)({userName:Object(Jt.isRequired)("User name"),password:Object(Jt.isRequired)("Password")}),n=function(){p.push("/")};Object(a.useEffect)((function(){e.canAccessSecureResource&&n()}),[e.canAccessSecureResource]);var i=function(){var t=Object(f.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.login(n);case 3:p.push("/activities"),t.next=9;break;case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",Object(an.a)({},rn.a,t.t0.statusText));case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(a.Fragment,null,r.a.createElement(cn,{defaultOpen:!0,content:r.a.createElement(Nt.b,{onSubmit:i,validate:t,render:function(e){return r.a.createElement(Dt.a,null,r.a.createElement(mt.a,{as:"h2",content:"Login to Social Network",color:"teal",textAlign:"center"}),r.a.createElement(Nt.a,{name:"userName",component:Zt,placeholder:"User Name"}),r.a.createElement(Nt.a,{name:"password",type:"Password",component:Zt,placeholder:"Password"}),e.submitError&&!e.dirtySinceLastSubmit&&r.a.createElement(sn,{error:e.submitError,text:"Invalid user name or password"}),r.a.createElement(w.a,{loading:e.submitting,disabled:e.invalid&&!e.dirtySinceLastSubmit||e.pristine,onClick:e.handleSubmit,content:"Login",color:"teal",fluid:!0}))}}),onClose:n,size:ct.Tiny}))},mn=Object(Jt.createValidator)((function(e){return function(t){if(t&&!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t))return e}}),"Invalid email address"),pn=Object(Jt.createValidator)((function(e){return function(t){if(t&&!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[#$^+=!*()@%&]).{6,10}$$/g.test(t))return e}}),"Password requires atleast 1 lower case letter, 1 capital letter, 1 digit, 1 special character and the length should be between 6-10 characters."),dn=function(){var e=Object(a.useContext)(lt).userStore,t=Object(Jt.combineValidators)({firstName:Object(Jt.composeValidators)(Object(Jt.isRequired)("First name"),Object(Jt.hasLengthGreaterThan)(1)({message:"First name must contain atleast 2 characters!"}),Object(Jt.hasLengthLessThan)(25)({message:"First name must be 24 characters or less!"}))(),lastName:Object(Jt.composeValidators)(Object(Jt.isRequired)("Last name"),Object(Jt.hasLengthGreaterThan)(1)({message:"Last name must contain atleast 2 characters!"}),Object(Jt.hasLengthLessThan)(25)({message:"Last name must be 24 characters or less!"}))(),email:Object(Jt.composeValidators)(Object(Jt.isRequired)("Email"),mn)(),userName:Object(Jt.composeValidators)(Object(Jt.isRequired)("User name"),Object(Jt.hasLengthGreaterThan)(5)({message:"User name must contain atleast 6 characters!"}),Object(Jt.hasLengthLessThan)(25)({message:"User name must be 24 characters or less!"}))(),password:Object(Jt.composeValidators)(Object(Jt.isRequired)("Password"),Object(Jt.hasLengthGreaterThan)(5)({message:"Password must contain atleast 6 characters!"}),Object(Jt.hasLengthLessThan)(11)({message:"Password must be 10 characters or less!"}),pn)()}),n=function(){var t=Object(f.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.register(n);case 3:p.push("/"),t.next=9;break;case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",Object(an.a)({},rn.a,t.t0));case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(cn,{defaultOpen:!0,content:r.a.createElement(Nt.b,{onSubmit:n,validate:t,render:function(e){return r.a.createElement(Dt.a,null,r.a.createElement(mt.a,{as:"h2",content:"Register",color:"teal",textAlign:"center"}),r.a.createElement(Nt.a,{name:"firstName",component:Zt,placeholder:"First Name"}),r.a.createElement(Nt.a,{name:"lastName",component:Zt,placeholder:"Last Name"}),r.a.createElement(Nt.a,{name:"email",component:Zt,placeholder:"Email"}),r.a.createElement(Nt.a,{name:"userName",component:Zt,placeholder:"User Name"}),r.a.createElement(Nt.a,{name:"password",type:"Password",component:Zt,placeholder:"Password"}),e.submitError&&!e.dirtySinceLastSubmit&&r.a.createElement(sn,{error:e.submitError}),r.a.createElement(w.a,{loading:e.submitting,disabled:e.invalid&&!e.dirtySinceLastSubmit||e.pristine,onClick:e.handleSubmit,content:"Register",color:"teal",fluid:!0}))}}),onClose:function(){p.push("/")},size:ct.Tiny})},bn=n(690),fn=n(678),vn=n(694),hn=Object(h.a)((function(){var e,t=Object(a.useContext)(lt),n=Object(a.useState)(!1),i=Object(vt.a)(n,2),o=i[0],c=i[1],l=t.profileStore,s=l.userProfile,u=l.follow,m=l.unfollow,p=l.isViewingOwnProfile,d=function(){var e=Object(f.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c(!0),!s.following){e.next=6;break}return e.next=4,m(s.appUserId);case 4:e.next=8;break;case 6:return e.next=8,u(s.appUserId);case 8:c(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(ut.a,null,r.a.createElement(dt.a,null,r.a.createElement(dt.a.Column,{width:12},r.a.createElement(gt.a.Group,null,r.a.createElement(gt.a,null,r.a.createElement(gt.a.Image,{avatar:!0,size:"small",src:(null===s||void 0===s||null===(e=s.mainPhoto)||void 0===e?void 0:e.url)||"/assets/user.png"}),r.a.createElement(gt.a.Content,{verticalAlign:"middle"},r.a.createElement(mt.a,{as:"h1"},null===s||void 0===s?void 0:s.displayName))))),r.a.createElement(dt.a.Column,{width:4},r.a.createElement(bn.a.Group,{widths:2},r.a.createElement(bn.a,{label:"Followers",value:null===s||void 0===s?void 0:s.followersCount}),r.a.createElement(bn.a,{label:"Following",value:null===s||void 0===s?void 0:s.followingCount})),s&&!p?r.a.createElement(a.Fragment,null,r.a.createElement(fn.a,null),r.a.createElement(vn.a,{animated:"move"},r.a.createElement(a.Fragment,null,r.a.createElement(vn.a.Content,{hidden:!0},r.a.createElement(w.a,{onClick:function(){return d()},content:s.following?"Unfollow":"Follow",loading:o,className:s.following?"negative":"positive",fluid:!0,basic:!0})),")",r.a.createElement(vn.a.Content,{visible:!0,style:{width:"100%"}},r.a.createElement(w.a,{content:s.following?"Following":"Not following",fluid:!0,color:"teal"}))))):"")))})),gn=n(695),On=n(686),wn=n(373),En={border:"dashed 3px",borderColor:"#eee",borderRadius:"5px",paddingTop:"30px",textAlign:"center",height:"200px"},yn={borderColor:"teal"},jn=function(e){var t=e.setFiles,n=Object(a.useCallback)((function(e){var n=e.map((function(e){return console.log(typeof e),{file:e,preview:URL.createObjectURL(e)}}));console.log(n),t(n)}),[t]),i=Object(wn.a)({onDrop:n}),o=i.getRootProps,c=i.getInputProps,l=i.isDragActive;return r.a.createElement("div",Object.assign({},o(),{style:l?Object(tt.a)(Object(tt.a)({},En),yn):En}),r.a.createElement("input",c()),r.a.createElement(Ot.a,{name:"upload",size:"huge"}),r.a.createElement(mt.a,{content:"Drop image here"}))},Cn=n(372),xn=n.n(Cn),Sn=(n(661),function(e){var t=Object(a.useRef)(null);return r.a.createElement(xn.a,{ref:t,src:e.previewImage,style:{height:200,width:"100%"},aspectRatio:1,preview:".img-preview",guides:!1,viewMode:1,dragMode:"move",scalable:!0,cropBoxMovable:!0,cropBoxResizable:!0,crop:function(){if(t&&t.current){if("undefined"===typeof t.current.getCroppedCanvas())return;t.current.getCroppedCanvas().toBlob((function(t){e.setImage(t)}),"image/jpeg")}}})}),kn=function(e){var t=e.uploadPhoto,n=Object(a.useState)([]),i=Object(vt.a)(n,2),o=i[0],c=i[1],l=Object(a.useState)(null),s=Object(vt.a)(l,2),u=s[0],m=s[1],p=Object(a.useState)(!1),d=Object(vt.a)(p,2),v=d[0],h=d[1],g=function(){var e=Object(f.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,t(u);case 3:h(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){return function(){o.forEach((function(e){URL.revokeObjectURL(e.preview)}))}}),[o]),r.a.createElement(dt.a,null,r.a.createElement(dt.a.Column,{width:4},r.a.createElement(mt.a,{sub:!0,color:"teal",content:"Step 1 - Add Photo"}),r.a.createElement(jn,{setFiles:c})),r.a.createElement(dt.a.Column,{width:1}),r.a.createElement(dt.a.Column,{width:4},r.a.createElement(mt.a,{sub:!0,color:"teal",content:"Step 2 - Resize Image"}),o&&o.length>0&&r.a.createElement(Sn,{setImage:m,previewImage:o[0].preview})),r.a.createElement(dt.a.Column,{width:1}),r.a.createElement(dt.a.Column,{width:4},r.a.createElement(mt.a,{sub:!0,color:"teal",content:"Step 3 - Preview & Upload"}),o&&o.length>0&&r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"img-preview",style:{minHeight:200,overflow:"hidden"}}," "),r.a.createElement(w.a.Group,{widths:2},r.a.createElement(w.a,{loading:v,onClick:function(){return g()},icon:"check",positive:!0}),r.a.createElement(w.a,{disabled:v,onClick:function(){return c([])},icon:"close"})))))},An=Object(h.a)((function(){var e=Object(a.useContext)(lt).profileStore,t=e.userProfile,n=e.isViewingOwnProfile,i=e.uploadPhoto,o=e.setMainPhoto,c=e.deletePhoto,l=Object(a.useState)(!1),s=Object(vt.a)(l,2),u=s[0],m=s[1],p=Object(a.useState)(!1),d=Object(vt.a)(p,2),v=d[0],h=d[1],g=Object(a.useState)(!1),O=Object(vt.a)(g,2),y=O[0],j=O[1],C=Object(a.useState)(""),x=Object(vt.a)(C,2),S=x[0],k=x[1],A=function(){var e=Object(f.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(t);case 2:m(!1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(f.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(t.currentTarget.name),h(!0),e.next=4,o(n);case 4:h(!1);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),I=function(){var e=Object(f.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(t.currentTarget.name),j(!0),e.next=4,c(n);case 4:j(!1);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return r.a.createElement(gn.a.Pane,null,r.a.createElement(dt.a,null,r.a.createElement(dt.a.Column,{width:16,style:{paddingBottom:0}},r.a.createElement(mt.a,{floated:"left",icon:"image",content:"Photos"}),n&&r.a.createElement(w.a,{onClick:function(){m(!u)},floated:"right",primary:!0,basic:!0,content:u?"Cancel":"Add Photo"})),r.a.createElement(dt.a.Column,{width:16},u?r.a.createElement("div",null,r.a.createElement(kn,{uploadPhoto:A})):r.a.createElement(On.a.Group,{itemsPerRow:5},t&&t.photos&&t.photos.map((function(e){var n,a;return r.a.createElement(On.a,{key:e.id},r.a.createElement(On.a.Content,null,r.a.createElement(E.a,{src:e.url})),r.a.createElement(On.a.Content,{extra:!0,style:{padding:0}},r.a.createElement(w.a.Group,{fluid:!0,widths:2},r.a.createElement(w.a,{name:e.id,onClick:function(t){return P(t,e.id)},loading:v&&S===e.id,disabled:(null===(n=t.mainPhoto)||void 0===n?void 0:n.id)===e.id,basic:!0,positive:!0,content:"Main"}),r.a.createElement(w.a,{name:e.id,onClick:function(t){return I(t,e.id)},loading:y&&S===e.id,disabled:(null===(a=t.mainPhoto)||void 0===a?void 0:a.id)===e.id,basic:!0,negative:!0,icon:"trash"}))))}))))))})),Pn=Object(h.a)((function(e){var t=e.updateProfile,n=e.userProfile,i=e.setEditMode,o=Object(a.useState)(!1),c=Object(vt.a)(o,2),l=c[0],s=c[1],u=function(){var e=Object(f.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),e.next=4,t(n);case 4:i(!1),s(!1),e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",Object(an.a)({},rn.a,e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),m=Object(Jt.combineValidators)({firstName:Object(Jt.composeValidators)(Object(Jt.isRequired)("First name"),Object(Jt.hasLengthGreaterThan)(1)({message:"First name must contain atleast 2 characters!"}),Object(Jt.hasLengthLessThan)(25)({message:"First name must be 24 characters or less!"}))(),lastName:Object(Jt.composeValidators)(Object(Jt.isRequired)("Last name"),Object(Jt.hasLengthGreaterThan)(1)({message:"Last name must contain atleast 2 characters!"}),Object(Jt.hasLengthLessThan)(25)({message:"Last name must be 24 characters or less!"}))(),email:Object(Jt.composeValidators)(Object(Jt.isRequired)("Email"),mn)(),bio:Object(Jt.hasLengthLessThan)(241)({message:"Bio must be 240 characters or less!"})});return n?r.a.createElement(Nt.b,{onSubmit:u,validate:m,initialValues:n,render:function(e){return r.a.createElement(Dt.a,{onSubmit:e.handleSubmit},r.a.createElement(Nt.a,{name:"firstName",component:Zt,value:null===n||void 0===n?void 0:n.firstName,placeholder:"First Name"}),r.a.createElement(Nt.a,{name:"lastName",component:Zt,value:null===n||void 0===n?void 0:n.lastName,placeholder:"Last Name"}),r.a.createElement(Nt.a,{name:"email",component:Zt,value:null===n||void 0===n?void 0:n.email,placeholder:"Email"}),r.a.createElement(Nt.a,{name:"bio",component:Rt,value:null===n||void 0===n?void 0:n.bio,placeholder:"bio"}),r.a.createElement(w.a,{floated:"right",type:"Submit",loading:l,disabled:e.invalid||e.pristine,positive:!0,content:"Submit"}))}}):r.a.createElement(gn.a.Pane,null,"Loading user profile data")})),In=function(){var e=Object(a.useContext)(lt).profileStore,t=e.userProfile,n=e.isViewingOwnProfile,i=e.updateProfile,o=Object(a.useState)(!1),c=Object(vt.a)(o,2),l=c[0],s=c[1];return r.a.createElement(gn.a.Pane,null,r.a.createElement(dt.a,null,r.a.createElement(dt.a.Column,{width:16},r.a.createElement(mt.a,{floated:"left",icon:"user",content:"About ".concat(null===t||void 0===t?void 0:t.displayName)}),n&&r.a.createElement(w.a,{floated:"right",basic:!0,content:l?"Cancel":"Edit Profile",onClick:function(){return s(!l)}})),r.a.createElement(dt.a.Column,{width:16},l?r.a.createElement(Pn,{setEditMode:s,updateProfile:i,userProfile:t}):r.a.createElement(On.a,{fluid:!0},r.a.createElement(On.a.Content,null,r.a.createElement(On.a.Description,null,null===t||void 0===t?void 0:t.bio)),r.a.createElement(On.a.Content,{extra:!0},r.a.createElement(Ot.a,{name:"mail"}),null===t||void 0===t?void 0:t.email)))))},Ln=[{menuItem:"Future Events",pane:{key:"futureEvents"}},{menuItem:"Past Events",pane:{key:"pastEvents"}},{menuItem:"Hosting",pane:{key:"hosted"}}],Un=Object(h.a)((function(){var e=Object(a.useState)(!1),t=Object(vt.a)(e,2),n=t[0],i=t[1],o=Object(a.useContext)(lt).profileStore,c=o.loadUserActivities,l=o.userProfile,s=o.userActivities;Object(a.useEffect)((function(){(function(){var e=Object(f.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,c(l.appUserId,"");case 3:i(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[c,l]);return r.a.createElement(gn.a.Pane,{loading:n},r.a.createElement(dt.a,null,r.a.createElement(dt.a.Column,{width:16},r.a.createElement(mt.a,{floated:"left",icon:"calendar",content:"Activities"})),r.a.createElement(dt.a.Column,{width:16},r.a.createElement(gn.a,{panes:Ln,menu:{secondary:!0,pointing:!0},onTabChange:function(e,t){return function(e,t){var n;switch(i(!0),t.activeIndex){case 1:n="past";break;case 2:n="hosting";break;default:n="future"}c(l.appUserId,n).then((function(){i(!1)}))}(0,t)}}),r.a.createElement("br",null),r.a.createElement(On.a.Group,{itemsPerRow:4},s&&s.map((function(e){return r.a.createElement(On.a,{as:j.a,to:"".concat("/activities","/").concat(e.activityId),key:e.activityId},r.a.createElement(E.a,{src:"/assets/categoryImages/".concat(e.category,".jpg"),style:{minHeight:100,objectFit:"cover"}}),r.a.createElement(On.a.Content,null,r.a.createElement(On.a.Header,{textAlign:"center"},e.title),r.a.createElement(On.a.Meta,{textAlign:"center"},r.a.createElement("div",null,U()(e.date).format("MMM Do YYYY")),r.a.createElement("div",null,U()(e.date).format("h:mm A")))))}))))))})),Tn=Object(h.a)((function(e){var t,n=e.profile,a=e.isFollowersTab;return r.a.createElement(On.a,{as:j.a,to:"".concat("/profile","/").concat(n.appUserId)},r.a.createElement(E.a,{src:(null===(t=n.mainPhoto)||void 0===t?void 0:t.url)||"/assets/user.png"}),r.a.createElement(On.a.Content,null,r.a.createElement(On.a.Header,null,n.displayName)),r.a.createElement(On.a.Content,{extra:!0},r.a.createElement("div",null,r.a.createElement(Ot.a,{name:"user"}),"".concat(a?n.followersCount:n.followingCount))))})),Fn=Object(h.a)((function(){var e=Object(a.useContext)(lt).profileStore,t=e.userProfile,n=e.isLoadingfollowers,i=e.followers,o=e.isUserViewingFollowersTab;return r.a.createElement(gn.a.Pane,{loading:n},r.a.createElement(dt.a,null,r.a.createElement(dt.a.Column,{width:16},r.a.createElement(mt.a,{floated:"left",icon:"user",content:"".concat(t.displayName,o?" is followed by below users":" is following below users.")})),r.a.createElement(dt.a.Column,{width:16},r.a.createElement(On.a.Group,{itemsPerRow:5},i&&i.length>0&&(null===i||void 0===i?void 0:i.map((function(e){return r.a.createElement(Tn,{key:e.appUserId,profile:e,isFollowersTab:o})})))))))})),zn=Object(h.a)((function(){var e=Object(a.useContext)(lt);return r.a.createElement(gn.a,{menu:{fluid:!0,vertical:!0},menuPosition:"right",panes:[{menuItem:"About",render:function(){return r.a.createElement(In,null)}},{menuItem:"Photos",render:function(){return r.a.createElement(An,null)}},{menuItem:"Activities",render:function(){return r.a.createElement(Un,null)}},{menuItem:"Followers",render:function(){return r.a.createElement(Fn,null)}},{menuItem:"Following",render:function(){return r.a.createElement(Fn,null)}}],onTabChange:function(t,n){return e.profileStore.setActiveTab(n.activeIndex)}})})),Dn=Object(h.a)((function(e){var t=Object(a.useContext)(lt).profileStore.getUserProfile,n=Object(a.useState)(!1),i=Object(vt.a)(n,2),o=i[0],c=i[1];return Object(a.useEffect)((function(){(function(){var n=Object(f.a)(b.a.mark((function n(){return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c(!0),n.next=3,t(e.match.params.appUserId);case 3:c(!1);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}})()()}),[t,e.match.params.appUserId]),o?r.a.createElement(Ft,{message:"Loading Profile"}):r.a.createElement(a.Fragment,null,r.a.createElement(hn,null),r.a.createElement(zn,null))})),Nn=function(){return r.a.createElement(ut.a,{placeholder:!0},r.a.createElement(mt.a,{icon:!0},r.a.createElement(Ot.a,{name:"search"}),"Oops, We've found everywhere but we could not find this."),r.a.createElement(ut.a.Inline,null,r.a.createElement(w.a,{as:j.a,to:"/activities",primary:!0},"Return to Activity Page")))},Rn=Object(h.a)((function(e){var t=e.component,n=Object(Wt.a)(e,["component"]),i=Object(a.useContext)(lt).userStore.canAccessSecureResource;return r.a.createElement(c.b,Object.assign({},n,{render:function(e){return i?r.a.createElement(t,e):r.a.createElement(c.a,{to:"/Login"})}}))})),Hn=Object(c.h)(Object(h.a)((function(e){var t=e.location,n=Object(a.useContext)(lt),i=n.commonStore,o=n.userStore.current;return Object(a.useEffect)((function(){i.getToken()?function(){var e=Object(f.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().finally((function(){return i.setAppLoaded()}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()():i.setAppLoaded()}),[o,i]),i.appLoaded?r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{position:"bottom-right"}),r.a.createElement(c.b,{path:"/",exact:!0,component:pt}),r.a.createElement(c.b,{path:"/(.+)",render:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(st,null),r.a.createElement(v.a,{style:{marginTop:"7em"}},r.a.createElement(c.d,null,r.a.createElement(Rn,{path:"/activities",exact:!0,component:Ut}),r.a.createElement(Rn,{path:"".concat("/activities","/:id"),exact:!0,component:Bt}),r.a.createElement(Rn,{key:t.key,exact:!0,path:["/createactivity","".concat("/manageactivity","/:id")],component:nn}),r.a.createElement(Rn,{path:"".concat("/profile","/:appUserId"),component:Dn}),r.a.createElement(c.b,{path:"/Login",component:un}),r.a.createElement(c.b,{path:"/Register",component:dn}),r.a.createElement(c.b,{component:Nn}))))}})):r.a.createElement(Ft,{message:"Loading Application..."})})));s()(),o.a.render(r.a.createElement(c.c,{history:p},r.a.createElement(r.a.Fragment,null,r.a.createElement(u,null),r.a.createElement(Hn,null))),document.querySelector("#root"))}},[[386,1,2]]]);
//# sourceMappingURL=main.69f54517.chunk.js.map
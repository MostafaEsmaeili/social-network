(this["webpackJsonpreact-client"]=this["webpackJsonpreact-client"]||[]).push([[0],{486:function(e,t,n){e.exports=n(876)},500:function(e,t,n){},523:function(e,t){},525:function(e,t){},539:function(e,t){},541:function(e,t){},569:function(e,t){},571:function(e,t){},572:function(e,t){},578:function(e,t){},580:function(e,t){},598:function(e,t){},601:function(e,t){},617:function(e,t){},620:function(e,t){},876:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(30),o=n.n(i),c=n(37),l=n(442),s=n.n(l);n(494),n(497),n(498),n(499),n(500);function u(){var e=Object(c.g)().pathname;return Object(a.useEffect)((function(){window.scrollTo(0,0)}),[e]),null}var m=n(55),p=Object(m.a)(),d=n(8),f=n.n(d),b=n(12),h=n(887),v=n(25),g=n(35),w=n(475),O=n(903),E=n(476),y=n(163),j=n(28),k=("",""),x=(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_API_BASE_URL:""}).FACEBOOK_APP_ID,n(54)),S=n(9),C=n(474),A=n(13),P=n(90),I=n(11),T=(n(137),n(49)),L=n.n(T),U=n(162),F=n.n(U),z=F.a.create({baseURL:"".concat(k,"/api/"),withCredentials:!0,timeout:3e4});z.interceptors.request.use((function(e){var t=window.localStorage.getItem("SN_JWT_Token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)})),z.interceptors.response.use((function(e){return e}),function(){var e=Object(b.a)(f.a.mark((function e(t){var n,a,r,i,o,c,l,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Network Error"!==t.message||t.response){e.next=3;break}return g.b.error("Network error server is down for maintenance, Please try after sometime"),e.abrupt("return");case 3:if(n=t.config,a=t.response,r=a.config,i=a.data,400!==(o=a.status)){e.next=9;break}"get"===r.method&&i.errors.hasOwnProperty("id")?p.push("/notfound"):g.b.error("Bad request, Please check data"),e.next=30;break;case 9:if(401!==o){e.next=29;break}if(!n.url.endsWith("refresh")){e.next=18;break}return window.localStorage.removeItem("SN_JWT_Token"),window.localStorage.removeItem("SN_JWT_Refresh_Token"),p.push("/Login"),g.b.error("Your session has expired, please login again"),e.abrupt("return",Promise.reject(t));case 18:if(n._refreshAttempt){e.next=27;break}return n._refreshAttempt=!0,c=window.localStorage.getItem("SN_JWT_Token"),l=window.localStorage.getItem("SN_JWT_Refresh_Token"),e.next=24,Je(c,l);case 24:return s=e.sent,n.headers.Authorization="Bearer ".concat(s.token),e.abrupt("return",F()(n));case 27:e.next=30;break;case 29:404===o?p.push("/notfound"):500===o&&g.b.error("Oops! Something went wrong, please try again later");case 30:throw t.response;case 31:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var R,D,N,_,H,M,V,G,q,B,W,J,Y,K,Z,$,Q,X,ee,te,ne,ae,re,ie,oe,ce,le,se,ue,me,pe,de,fe,be,he,ve,ge,we,Oe,Ee,ye,je,ke,xe,Se,Ce,Ae,Pe,Ie,Te,Le,Ue,Fe,ze,Re,De,Ne,_e,He,Me,Ve,Ge,qe,Be,We,Je=function(e,t){return F.a.post("".concat(k,"/api/user/refresh"),{token:e,refreshToken:t}).then((function(e){return window.localStorage.setItem("SN_JWT_Token",e.data.token),window.localStorage.setItem("SN_JWT_Refresh_Token",e.data.refreshToken),F.a.defaults.headers.common.Authorization="Bearer ".concat(e.data.token),e.data}))},Ye=function(e){return e.data},Ke={get:function(){var e=Object(b.a)(f.a.mark((function e(t,n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.get(t,{params:n});case 2:return a=e.sent,e.abrupt("return",Ye(a));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),post:function(){var e=Object(b.a)(f.a.mark((function e(t,n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.post(t,n);case 2:return a=e.sent,e.abrupt("return",Ye(a));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),put:function(){var e=Object(b.a)(f.a.mark((function e(t,n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.put(t,n);case 2:return a=e.sent,e.abrupt("return",Ye(a));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),delete:function(){var e=Object(b.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.delete(t);case 2:return n=e.sent,e.abrupt("return",Ye(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),postForm:function(){var e=Object(b.a)(f.a.mark((function e(t,n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.post(t,n,{headers:{"Content-type":"multipart/form-data"}});case 2:return a=e.sent,e.abrupt("return",Ye(a));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},Ze={list:function(e){return Ke.get("/activities",e)},details:function(e){return Ke.get("/activities/".concat(e))},create:function(e){return Ke.post("/activities",e)},update:function(e){return Ke.put("/activities/".concat(e.id),e)},delete:function(e){return Ke.delete("/activities/".concat(e))},attend:function(e){return Ke.post("/activities/".concat(e,"/attend"),{})},unattend:function(e){return Ke.post("/activities/".concat(e,"/unattend"),{})},getComments:function(e){return Ke.get("/activities/".concat(e,"/comments"))}},$e=function(e,t){return{appUserId:e.appUserId,displayName:e.displayName,image:e.image,isHost:t}},Qe=function(e,t){return null!=e&&e.attendees.length>0?e.attendees.filter((function(e){return e.appUserId!==t.appUserId})):[]},Xe=(R=function(){function e(t){var n=this;Object(x.a)(this,e),this.rootStore=void 0,Object(A.a)(this,"activityRegistry",D,this),Object(A.a)(this,"selectedActivity",N,this),Object(A.a)(this,"isLoadingActivity",_,this),Object(A.a)(this,"isLoadingActivities",H,this),Object(A.a)(this,"showForm",M,this),Object(A.a)(this,"isSaving",V,this),Object(A.a)(this,"isDeleting",G,this),Object(A.a)(this,"totalActivitiesCount",q,this),Object(A.a)(this,"currentPageNumber",B,this),Object(A.a)(this,"predicate",W,this),this.getActivity=function(e){return n.activityRegistry.get(e)},Object(A.a)(this,"setSelectedActivity",J,this),Object(A.a)(this,"setShowFormFlag",Y,this),Object(A.a)(this,"setIsLoadingActivity",K,this),Object(A.a)(this,"setIsSaving",Z,this),Object(A.a)(this,"setIsDeleting",$,this),Object(A.a)(this,"setIsLoadingActivities",Q,this),Object(A.a)(this,"registerActivity",X,this),Object(A.a)(this,"loadActivities",ee,this),Object(A.a)(this,"loadActivity",te,this),Object(A.a)(this,"createActivity",ne,this),Object(A.a)(this,"editActivity",ae,this),Object(A.a)(this,"deleteActivity",re,this),Object(A.a)(this,"attend",ie,this),Object(A.a)(this,"unattend",oe,this),Object(A.a)(this,"getComments",ce,this),Object(A.a)(this,"addComment",le,this),Object(A.a)(this,"onReceivingCommentFromServer",se,this),Object(A.a)(this,"setTotalActivityCount",ue,this),Object(A.a)(this,"setPageNumber",me,this),Object(A.a)(this,"setPredicate",pe,this),this.getQSParams=function(){var e=new URLSearchParams;return e.append("offset",(2*n.currentPageNumber).toString()),e.append("limit",2..toString()),n.predicate.forEach((function(t,n){"startDate"===n?e.append(n,t.toISOString()):e.append(n,t.toString())})),e},this.groupActivitiesByDate=function(e){return Object.entries(e.reduce((function(e,t){var n=L()(t.date).format("MM-DD-yyyy");return e[n]=e[n]?[].concat(Object(C.a)(e[n]),[t]):[t],e}),{}))},this.getCurrentUser=function(){return n.rootStore.userStore.getCurrentUserInstance()},this.rootStore=t,Object(S.reaction)((function(){return n.predicate.keys()}),(function(){n.currentPageNumber=0,n.activityRegistry.clear(),n.loadActivities()}))}return Object(P.a)(e,[{key:"totalPages",get:function(){return Math.ceil(this.totalActivitiesCount/2)}},{key:"activityByDate",get:function(){var e=Array.from(this.activityRegistry.values()).sort((function(e,t){return e.date&&t.date?e.date.getTime()-t.date.getTime():e?1:0}));return this.groupActivitiesByDate(e)}}]),e}(),D=Object(I.a)(R.prototype,"activityRegistry",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),N=Object(I.a)(R.prototype,"selectedActivity",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=Object(I.a)(R.prototype,"isLoadingActivity",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),H=Object(I.a)(R.prototype,"isLoadingActivities",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),M=Object(I.a)(R.prototype,"showForm",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),V=Object(I.a)(R.prototype,"isSaving",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),G=Object(I.a)(R.prototype,"isDeleting",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),q=Object(I.a)(R.prototype,"totalActivitiesCount",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),B=Object(I.a)(R.prototype,"currentPageNumber",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),W=Object(I.a)(R.prototype,"predicate",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),J=Object(I.a)(R.prototype,"setSelectedActivity",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.selectedActivity=t}}}),Y=Object(I.a)(R.prototype,"setShowFormFlag",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.showForm=t}}}),K=Object(I.a)(R.prototype,"setIsLoadingActivity",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.isLoadingActivity=t}}}),Z=Object(I.a)(R.prototype,"setIsSaving",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.isSaving=t}}}),$=Object(I.a)(R.prototype,"setIsDeleting",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.isDeleting=t}}}),Q=Object(I.a)(R.prototype,"setIsLoadingActivities",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.isLoadingActivities=t}}}),X=Object(I.a)(R.prototype,"registerActivity",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){t.date=new Date(t.date);var n=e.getCurrentUser();n&&(t.isCurrentUserGoing=function(e,t){return!!(null!=e&&e.attendees.length>0&&t)&&e.attendees.some((function(e){return e.appUserId===t.appUserId}))}(t,n),t.isCurrentUserHost=function(e,t){return!!(null!=e&&e.attendees.length>0&&t)&&e.attendees.some((function(e){return e.appUserId===t.appUserId&&!0===e.isHost}))}(t,n),t.host=function(e){if(null!=e&&e.attendees.length>0){var t=e.attendees.filter((function(e){return!0===e.isHost}));if(t.length>0)return t[0]}return null}(t)),e.activityRegistry.set(t.id,t)}}}),ee=Object(I.a)(R.prototype,"loadActivities",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(b.a)(f.a.mark((function t(){var n,a,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.setIsLoadingActivities(!0),t.next=4,Ze.list(e.getQSParams());case 4:n=t.sent,a=n.count,(r=n.activities)&&r.forEach((function(t){e.registerActivity(t)})),e.setTotalActivityCount(a),e.setIsLoadingActivities(!1),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.error(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))}}),te=Object(I.a)(R.prototype,"loadActivity",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(b.a)(f.a.mark((function t(n){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n&&(!n||0!==n.length)){t.next=2;break}return t.abrupt("return");case 2:if(!(a=e.getActivity(n))){t.next=6;break}return e.setSelectedActivity(a),t.abrupt("return",a);case 6:return e.setIsLoadingActivity(!0),t.prev=7,t.next=10,Ze.details(n);case 10:return a=t.sent,e.registerActivity(a),e.setSelectedActivity(a),e.setIsLoadingActivity(!1),t.abrupt("return",a);case 17:t.prev=17,t.t0=t.catch(7),console.error(t.t0),e.setIsLoadingActivity(!1);case 21:case"end":return t.stop()}}),t,null,[[7,17]])})));return function(e){return t.apply(this,arguments)}}()}}),ne=Object(I.a)(R.prototype,"createActivity",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(b.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setIsSaving(!0),t.prev=1,t.next=4,Ze.create(n);case 4:return n.id=t.sent,Object(S.runInAction)((function(){n.attendees=n.attendees||[],n.attendees.push($e(e.getCurrentUser(),!0))})),e.registerActivity(n),e.setIsSaving(!1),e.setShowFormFlag(!1),t.abrupt("return",n.id);case 12:t.prev=12,t.t0=t.catch(1),console.error(t.t0),e.setIsSaving(!1),e.setShowFormFlag(!1);case 17:return t.abrupt("return","");case 18:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}()}}),ae=Object(I.a)(R.prototype,"editActivity",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(b.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setIsSaving(!0),t.prev=1,t.next=4,Ze.update(n);case 4:return e.registerActivity(n),e.setIsSaving(!1),e.setShowFormFlag(!1),t.abrupt("return",!0);case 10:t.prev=10,t.t0=t.catch(1),console.error(t.t0),e.setIsSaving(!1),e.setShowFormFlag(!1);case 15:return t.abrupt("return",!1);case 16:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()}}),re=Object(I.a)(R.prototype,"deleteActivity",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(b.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setIsDeleting(!0),t.prev=1,t.next=4,Ze.delete(n);case 4:Object(S.runInAction)((function(){e.activityRegistry.delete(n)})),e.setIsDeleting(!1),e.setShowFormFlag(!1),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0),e.setIsDeleting(!1),e.setShowFormFlag(!1);case 14:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}}),ie=Object(I.a)(R.prototype,"attend",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(b.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ze.attend(n.id);case 3:Object(S.runInAction)((function(){n.attendees=n.attendees||[],n.attendees.push($e(e.getCurrentUser(),!1))})),e.registerActivity(n),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0),g.b.error("Problem signin up to activity, Please try again later!");case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}}),oe=Object(I.a)(R.prototype,"unattend",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(b.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ze.unattend(n.id);case 3:Object(S.runInAction)((function(){n.attendees=Qe(n,e.getCurrentUser())})),e.registerActivity(n),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0),g.b.error("Problem cancelling attendance, Please try again later!");case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}}),ce=Object(I.a)(R.prototype,"getComments",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(b.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.selectedActivity||!e.selectedActivity.comments){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,Ze.getComments(e.selectedActivity.id);case 5:n=t.sent,Object(S.runInAction)((function(){e.selectedActivity&&(e.selectedActivity.comments=n||[])})),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.error(t.t0),g.b.error("Problem fetching comments, Please try again later!");case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))}}),le=Object(I.a)(R.prototype,"addComment",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(b.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.activityId=e.selectedActivity.id,t.prev=1,t.next=4,e.rootStore.activityHubStore.sendComment(n);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.error(t.t0);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}()}}),se=Object(I.a)(R.prototype,"onReceivingCommentFromServer",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n;null===(n=e.selectedActivity)||void 0===n||n.comments.push(t)}}}),ue=Object(I.a)(R.prototype,"setTotalActivityCount",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.totalActivitiesCount=t}}}),me=Object(I.a)(R.prototype,"setPageNumber",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.currentPageNumber=t}}}),pe=Object(I.a)(R.prototype,"setPredicate",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,n){e.predicate.clear(),"all"!==t&&e.predicate.set(t,n)}}}),Object(I.a)(R.prototype,"totalPages",[S.computed],Object.getOwnPropertyDescriptor(R.prototype,"totalPages"),R.prototype),Object(I.a)(R.prototype,"activityByDate",[S.computed],Object.getOwnPropertyDescriptor(R.prototype,"activityByDate"),R.prototype),R),et=n(444),tt=n.n(et),nt=(de=function(){function e(t){var n=this;Object(x.a)(this,e),this.rootStore=void 0,Object(A.a)(this,"appLoaded",fe,this),this.getOrRefreshToken=Object(b.a)(f.a.mark((function e(){var t,a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.getToken(),a=n.getRefreshToken(),!t||!a){e.next=17;break}if(!((r=tt.a.decode(t))&&1e3*r.exp<=Date.now()+5e3)){e.next=16;break}return e.prev=5,e.next=8,Je(t,a);case 8:return e.next=10,e.sent.token;case 10:return e.abrupt("return",e.sent);case 13:e.prev=13,e.t0=e.catch(5),g.b.error("Problem getting refresh token!");case 16:return e.abrupt("return",t);case 17:return e.abrupt("return","");case 18:case"end":return e.stop()}}),e,null,[[5,13]])}))),this.getToken=function(){return window.localStorage.getItem("SN_JWT_Token")},this.getRefreshToken=function(){return window.localStorage.getItem("SN_JWT_Refresh_Token")},this.rootStore=t}return Object(P.a)(e,[{key:"setToken",value:function(e){e?window.localStorage.setItem("SN_JWT_Token",e):window.localStorage.removeItem("SN_JWT_Token")}},{key:"setRefreshToken",value:function(e){e?window.localStorage.setItem("SN_JWT_Refresh_Token",e):window.localStorage.removeItem("SN_JWT_Refresh_Token")}},{key:"setAppLoaded",value:function(){this.appLoaded=!0}}]),e}(),fe=Object(I.a)(de.prototype,"appLoaded",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(I.a)(de.prototype,"setToken",[S.action],Object.getOwnPropertyDescriptor(de.prototype,"setToken"),de.prototype),Object(I.a)(de.prototype,"setRefreshToken",[S.action],Object.getOwnPropertyDescriptor(de.prototype,"setRefreshToken"),de.prototype),Object(I.a)(de.prototype,"setAppLoaded",[S.action],Object.getOwnPropertyDescriptor(de.prototype,"setAppLoaded"),de.prototype),de),at={current:function(){return Ke.get("/user")},login:function(e){return Ke.post("/user/login",e)},register:function(e){return Ke.post("/user/register",e)}},rt=(be=function(){function e(t){var n=this;Object(x.a)(this,e),this.rootStore=void 0,Object(A.a)(this,"user",he,this),Object(A.a)(this,"setUser",ve,this),Object(A.a)(this,"login",ge,this),Object(A.a)(this,"register",we,this),Object(A.a)(this,"current",Oe,this),Object(A.a)(this,"logout",Ee,this),Object(A.a)(this,"fbResponseHandler",ye,this),this.getCurrentUserInstance=function(){return Object(S.toJS)(n.user)},this.rootStore=t}return Object(P.a)(e,[{key:"setMainPhoto",value:function(e){this.user&&(this.user.image=e.url)}},{key:"setDisplayName",value:function(e){this.user&&(this.user.displayName=e)}},{key:"isUserLoggedIn",get:function(){return!!this.user}},{key:"canAccessSecureResource",get:function(){var e=this.rootStore.commonStore.getToken();return!!(this.isUserLoggedIn&&e&&e.length>0)}}]),e}(),he=Object(I.a)(be.prototype,"user",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(I.a)(be.prototype,"isUserLoggedIn",[S.computed],Object.getOwnPropertyDescriptor(be.prototype,"isUserLoggedIn"),be.prototype),Object(I.a)(be.prototype,"canAccessSecureResource",[S.computed],Object.getOwnPropertyDescriptor(be.prototype,"canAccessSecureResource"),be.prototype),ve=Object(I.a)(be.prototype,"setUser",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.user=t}}}),ge=Object(I.a)(be.prototype,"login",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(b.a)(f.a.mark((function t(n){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.rootStore.commonStore.setToken(null),e.rootStore.commonStore.setRefreshToken(null),t.next=5,at.login(n);case 5:a=t.sent,e.setUser(a),e.rootStore.commonStore.setToken(a.token),e.rootStore.commonStore.setRefreshToken(a.refreshToken),t.next=14;break;case 11:throw t.prev=11,t.t0=t.catch(0),t.t0;case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()}}),we=Object(I.a)(be.prototype,"register",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(b.a)(f.a.mark((function t(n){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e.isUserLoggedIn){t.next=8;break}return t.next=4,at.register(n);case 4:a=t.sent,e.setUser(a),e.rootStore.commonStore.setToken(a.token),e.rootStore.commonStore.setRefreshToken(a.refreshToken);case 8:t.next=13;break;case 10:throw t.prev=10,t.t0=t.catch(0),t.t0;case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}}),Oe=Object(I.a)(be.prototype,"current",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(b.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e.user){t.next=6;break}return t.next=4,at.current();case 4:n=t.sent,e.setUser(n);case 6:return t.abrupt("return",e.user);case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))}}),Object(I.a)(be.prototype,"setMainPhoto",[S.action],Object.getOwnPropertyDescriptor(be.prototype,"setMainPhoto"),be.prototype),Object(I.a)(be.prototype,"setDisplayName",[S.action],Object.getOwnPropertyDescriptor(be.prototype,"setDisplayName"),be.prototype),Ee=Object(I.a)(be.prototype,"logout",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.rootStore.commonStore.setToken(null),e.rootStore.commonStore.setRefreshToken(null),e.setUser(null),p.push("/")}}}),ye=Object(I.a)(be.prototype,"fbResponseHandler",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(e){console.log(e)}}}),be),it=n(131),ot={get:function(e){return Ke.get("profile/".concat(e))},userActivities:function(e,t){return Ke.get("profile/".concat(e,"/activities"),t)},followers:function(e){return Ke.get("profile/".concat(e,"/followers"))},followings:function(e){return Ke.get("profile/".concat(e,"/followings"))},update:function(e){return Ke.put("profile/",e)},follow:function(e){return Ke.post("profile/".concat(e,"/follow"),{})},unfollow:function(e){return Ke.post("profile/".concat(e,"/unfollow"),{})}},ct={upload:function(e){var t=new FormData;return t.append("File",e),Ke.postForm("photo/",t)},setMain:function(e){return Ke.post("photo/".concat(e,"/setmain"),e)},delete:function(e){return Ke.delete("photo/".concat(e))}},lt=(je=function(){function e(t){var n=this;Object(x.a)(this,e),this.rootStore=void 0,Object(A.a)(this,"userProfile",ke,this),Object(A.a)(this,"activeTabIndex",xe,this),Object(A.a)(this,"followers",Se,this),Object(A.a)(this,"isLoadingfollowers",Ce,this),Object(A.a)(this,"userActivities",Ae,this),Object(A.a)(this,"setActiveTab",Pe,this),Object(A.a)(this,"setUserProfile",Ie,this),Object(A.a)(this,"getUserProfile",Te,this),Object(A.a)(this,"uploadPhoto",Le,this),Object(A.a)(this,"setMainPhoto",Ue,this),Object(A.a)(this,"deletePhoto",Fe,this),Object(A.a)(this,"updateProfile",ze,this),Object(A.a)(this,"follow",Re,this),Object(A.a)(this,"unfollow",De,this),Object(A.a)(this,"loadFollowers",Ne,this),Object(A.a)(this,"setUserActivities",_e,this),Object(A.a)(this,"loadUserActivities",He,this),this.rootStore=t,Object(S.reaction)((function(){return n.activeTabIndex}),(function(e){3===e?n.loadFollowers(n.userProfile.appUserId,"followers"):4===e?n.loadFollowers(n.userProfile.appUserId,"followings"):n.followers=void 0}))}return Object(P.a)(e,[{key:"isViewingOwnProfile",get:function(){var e,t;return!((null===(e=this.rootStore.userStore.user)||void 0===e?void 0:e.userName)!==(null===(t=this.userProfile)||void 0===t?void 0:t.username))}},{key:"isUserViewingFollowersTab",get:function(){return 3===this.activeTabIndex}},{key:"isUserViewingFollowingTab",get:function(){return 4===this.activeTabIndex}}]),e}(),ke=Object(I.a)(je.prototype,"userProfile",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xe=Object(I.a)(je.prototype,"activeTabIndex",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Se=Object(I.a)(je.prototype,"followers",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Ce=Object(I.a)(je.prototype,"isLoadingfollowers",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ae=Object(I.a)(je.prototype,"userActivities",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(I.a)(je.prototype,"isViewingOwnProfile",[S.computed],Object.getOwnPropertyDescriptor(je.prototype,"isViewingOwnProfile"),je.prototype),Object(I.a)(je.prototype,"isUserViewingFollowersTab",[S.computed],Object.getOwnPropertyDescriptor(je.prototype,"isUserViewingFollowersTab"),je.prototype),Object(I.a)(je.prototype,"isUserViewingFollowingTab",[S.computed],Object.getOwnPropertyDescriptor(je.prototype,"isUserViewingFollowingTab"),je.prototype),Pe=Object(I.a)(je.prototype,"setActiveTab",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.activeTabIndex=t}}}),Ie=Object(I.a)(je.prototype,"setUserProfile",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.userProfile=t}}}),Te=Object(I.a)(je.prototype,"getUserProfile",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(b.a)(f.a.mark((function t(n){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ot.get(n);case 3:a=t.sent,e.setUserProfile(a),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0),g.b.error("Error loading user profile");case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}}),Le=Object(I.a)(je.prototype,"uploadPhoto",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(b.a)(f.a.mark((function t(n){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ct.upload(n);case 3:return a=t.sent,Object(S.runInAction)((function(){var t;null===(t=e.userProfile)||void 0===t||t.photos.push(a)})),t.abrupt("return",a);case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0),g.b.error("Error uploading photo");case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}}),Ue=Object(I.a)(je.prototype,"setMainPhoto",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(b.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ct.setMain(n);case 3:Object(S.runInAction)((function(){var t,a;e.userProfile&&(e.userProfile.mainPhoto=null===(t=e.userProfile)||void 0===t||null===(a=t.photos)||void 0===a?void 0:a.filter((function(e){return e.id===n}))[0],e.rootStore.userStore.setMainPhoto(e.userProfile.mainPhoto))})),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),console.error(t.t0),g.b.error("Problem setting photo as main");case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}}),Fe=Object(I.a)(je.prototype,"deletePhoto",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(b.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ct.delete(n);case 3:Object(S.runInAction)((function(){e.userProfile.photos=e.userProfile.photos.filter((function(e){return e.id!==n}))})),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),console.error(t.t0),g.b.error("Problem deleting photo");case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}}),ze=Object(I.a)(je.prototype,"updateProfile",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(b.a)(f.a.mark((function t(n){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ot.update(n);case 3:a=t.sent,Object(S.runInAction)((function(){e.rootStore.userStore.setDisplayName(a),e.userProfile=Object(it.a)(Object(it.a)({},e.userProfile),n),e.userProfile.displayName=a})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0),g.b.error("Problem updating user profile");case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}}),Re=Object(I.a)(je.prototype,"follow",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(b.a)(f.a.mark((function t(n){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ot.follow(n);case 3:a=t.sent,Object(S.runInAction)((function(){var t;(e.userProfile.followersCount+=1,e.userProfile.following=!0,e.isUserViewingFollowersTab)&&(e.followers=null!==(t=e.followers)&&void 0!==t?t:[],e.followers.push(a))})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0),g.b.error("Problem following user");case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}}),De=Object(I.a)(je.prototype,"unfollow",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(b.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ot.unfollow(n);case 3:Object(S.runInAction)((function(){var t;(e.userProfile.followersCount-=1,e.userProfile.following=!1,e.isUserViewingFollowersTab)&&(e.followers=null===(t=e.followers)||void 0===t?void 0:t.filter((function(t){var n;return t.appUserId!==(null===(n=e.rootStore.userStore.user)||void 0===n?void 0:n.appUserId)})))})),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),console.error(t.t0),g.b.error("Problem unfollowing user");case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}}),Ne=Object(I.a)(je.prototype,"loadFollowers",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(b.a)(f.a.mark((function t(n,a){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e.isLoadingfollowers=!0,r=void 0,"followers"!==a){t.next=9;break}return t.next=6,ot.followers(n);case 6:r=t.sent,t.next=12;break;case 9:return t.next=11,ot.followings(n);case 11:r=t.sent;case 12:Object(S.runInAction)((function(){e.followers=r&&r.length>0?r:void 0,e.isLoadingfollowers=!1})),t.next=20;break;case 15:t.prev=15,t.t0=t.catch(0),console.error(t.t0),g.b.error("Problem loading followers"),e.isLoadingfollowers=!1;case 20:return t.abrupt("return",null);case 21:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e,n){return t.apply(this,arguments)}}()}}),_e=Object(I.a)(je.prototype,"setUserActivities",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.userActivities=t}}}),He=Object(I.a)(je.prototype,"loadUserActivities",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(b.a)(f.a.mark((function t(n,a){var r,i;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,(r=new URLSearchParams).set("Predicate",a),t.next=5,ot.userActivities(n,r);case 5:i=t.sent,e.setUserActivities(i),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.error(t.t0),g.b.error("Problem loading user activities");case 13:return t.abrupt("return",null);case 14:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,n){return t.apply(this,arguments)}}()}}),je),st=n(276),ut=(Me=S.observable.ref,Ve=function e(t){Object(x.a)(this,e),this.rootStore=void 0,Object(A.a)(this,"hubConnection",Ge,this),Object(A.a)(this,"createHubConnection",qe,this),Object(A.a)(this,"stopHubConnection",Be,this),Object(A.a)(this,"sendComment",We,this),this.rootStore=t},Ge=Object(I.a)(Ve.prototype,"hubConnection",[Me],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qe=Object(I.a)(Ve.prototype,"createHubConnection",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.hubConnection=(new st.a).withUrl("".concat(k,"/activitychat"),{accessTokenFactory:function(){return e.rootStore.commonStore.getOrRefreshToken()}}).configureLogging(st.b.Information).build(),e.hubConnection.start().then((function(){var t;return null===(t=e.hubConnection)||void 0===t?void 0:t.state})).then((function(){var n;console.log("Attempting to join group ".concat(t)),"Connected"===e.hubConnection.state&&(null===(n=e.hubConnection)||void 0===n||n.invoke("AddToGroup",t))})).catch((function(e){return console.log("Error establishing a connection: ".concat(e))})),e.hubConnection.on("ReceiveComment",(function(t){e.rootStore.activityStore.onReceivingCommentFromServer(t)})),e.hubConnection.on("GroupNotification",(function(e){g.b.dismiss(),g.b.info(e)}))}}}),Be=Object(I.a)(Ve.prototype,"stopHubConnection",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.hubConnection.invoke("RemoveFromGroup",t).then((function(){e.hubConnection.stop()})).then((function(){console.log("Connection stopped")})).catch((function(e){return console.log("Error establishing a connection: ".concat(e))}))}}}),We=Object(I.a)(Ve.prototype,"sendComment",[S.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(b.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.hubConnection.invoke("SendComment",n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),Ve);Object(S.configure)({enforceActions:"always"});var mt,pt=Object(a.createContext)(new function e(){Object(x.a)(this,e),this.activityStore=void 0,this.userStore=void 0,this.commonStore=void 0,this.profileStore=void 0,this.activityHubStore=void 0,this.activityStore=new Xe(this),this.userStore=new rt(this),this.commonStore=new nt(this),this.profileStore=new lt(this),this.activityHubStore=new ut(this)}),dt=Object(v.a)((function(){var e,t,n,i=Object(a.useContext)(pt).userStore;return r.a.createElement(w.a,{fixed:"top",inverted:!0},r.a.createElement(h.a,null,r.a.createElement(w.a.Item,{header:!0,as:j.b,to:"".concat("/"),exact:!0},r.a.createElement("img",{src:"/assets/logo.png",alt:"logo"}),"Social Network"),i.isUserLoggedIn&&i.user&&r.a.createElement(a.Fragment,null,r.a.createElement(w.a.Item,{name:"Activities",as:j.b,to:"".concat("/activities")}),r.a.createElement(w.a.Item,null,r.a.createElement(O.a,{as:j.b,to:"".concat("/createactivity"),content:"Create Activity",positive:!0})),r.a.createElement(w.a.Item,{position:"right"},r.a.createElement(E.a,{avatar:!0,spaced:"right",src:(null===(e=i.user)||void 0===e?void 0:e.image)||"/assets/user.png"}),r.a.createElement(y.a,{pointing:"top left",text:null===(t=i.user)||void 0===t?void 0:t.displayName},r.a.createElement(y.a.Menu,null,r.a.createElement(y.a.Item,{as:j.a,to:"".concat("/profile","/").concat(null===(n=i.user)||void 0===n?void 0:n.appUserId),text:"My profile",icon:"user"}),r.a.createElement(y.a.Item,{onClick:function(){return i.logout()},text:"Logout",icon:"power"})))))))})),ft=n(277),bt=n(906),ht=Object(v.a)((function(){var e=Object(a.useContext)(pt),t=e.userStore,n=e.commonStore;return r.a.createElement(ft.a,{inverted:!0,textAlign:"center",vertical:!0,className:"masthead"},r.a.createElement(h.a,{text:!0},r.a.createElement(bt.a,{as:"h1",inverted:!0},r.a.createElement(E.a,{size:"massive",src:"/assets/logo.png",alt:"logo",style:{marginBottom:12}}),"Social Network"),!0===t.isUserLoggedIn&&n.getToken()?r.a.createElement(a.Fragment,null,r.a.createElement(bt.a,{as:"h2",inverted:!0,content:"Welcome back ".concat(t.user.displayName)}),r.a.createElement(O.a,{as:j.a,to:"/activities",size:"huge",inverted:!0},"Go to activities!")):r.a.createElement(a.Fragment,null,r.a.createElement(O.a,{as:j.a,to:"/Login",size:"huge",inverted:!0},"Login"),r.a.createElement(O.a,{as:j.a,to:"/Register",size:"huge",inverted:!0},"Register"))))})),vt=n(477),gt=n(458),wt=n.n(gt),Ot=n(34),Et=n(216),yt=n(898),jt=n(95),kt=n(899),xt=n(897),St={borderColor:"orange",borderWidth:2},Ct=function(e){var t=e.attendees;return r.a.createElement(kt.a,{horizontal:!0},null===t||void 0===t?void 0:t.map((function(e){var t=e.image||"/assets/user.png";return r.a.createElement(kt.a.Item,{key:e.appUserId},r.a.createElement(xt.a,{header:e.displayName,trigger:r.a.createElement(E.a,{src:t,size:"mini",circular:!0,bordered:!0,style:e.following?St:null})}))})))},At=function(e){var t,n,a,i=e.activity;return r.a.createElement(ft.a.Group,null,r.a.createElement(ft.a,null,r.a.createElement(yt.a.Group,null,r.a.createElement(yt.a,null,r.a.createElement(yt.a.Image,{size:"tiny",circular:!0,src:(null===(t=i.host)||void 0===t?void 0:t.image)||"/assets/user.png",style:{marginBottom:3}}),r.a.createElement(yt.a.Content,null,r.a.createElement(yt.a.Header,{as:j.a,to:"".concat("/activities","/").concat(i.id)},i.title),r.a.createElement(yt.a.Description,null,"Hosted by "," ",r.a.createElement(j.a,{to:"".concat("/profile","/").concat(null===(n=i.host)||void 0===n?void 0:n.appUserId)},null===(a=i.host)||void 0===a?void 0:a.displayName)),i.isCurrentUserHost&&r.a.createElement(yt.a.Description,null,r.a.createElement(Et.a,{basic:!0,color:"orange",content:"You are hosting this activity"})),i.isCurrentUserGoing&&!i.isCurrentUserHost&&r.a.createElement(yt.a.Description,null,r.a.createElement(Et.a,{basic:!0,color:"green",content:"You are going to this activity"})))))),r.a.createElement(ft.a,null,r.a.createElement(jt.a,{name:"clock"}),L()(i.date).format("h:mm A"),r.a.createElement(jt.a,{name:"marker"}),i.venue,", ",i.city),r.a.createElement(ft.a,{secondary:!0},r.a.createElement(Ct,{attendees:i.attendees})),r.a.createElement(ft.a,{clearing:!0},r.a.createElement("span",null,i.description),r.a.createElement(O.a,{as:j.a,to:"".concat("/activities","/").concat(i.id),name:i.id,content:"View",floated:"right",color:"blue"})))},Pt=Object(v.a)((function(){var e=Object(a.useContext)(pt).activityStore;return r.a.createElement(a.Fragment,null,e.activityByDate.map((function(e){var t=Object(Ot.a)(e,2),n=t[0],i=t[1];return r.a.createElement(a.Fragment,{key:n},r.a.createElement(Et.a,{size:"large",color:"blue"},n),r.a.createElement(yt.a.Group,{divided:!0},i.map((function(e){return r.a.createElement(At,{key:e.id,activity:e})}))))})))})),It=n(890),Tt=function(e){var t=e.message,n=e.loading;return r.a.createElement(It.a,{active:n,inline:"centered"},t)},Lt=n(215),Ut=Object(v.a)((function(){var e=Object(a.useContext)(pt).activityStore,t=e.setPredicate,n=e.predicate;return r.a.createElement(a.Fragment,null,r.a.createElement(w.a,{vertical:!0,size:"large",style:{width:"100%",marginTop:50}},r.a.createElement(bt.a,{icon:"filter",attached:!0,color:"teal",content:"Filters"}),r.a.createElement(w.a.Item,{active:!n.has("isGoing")&&!n.has("isHost"),onClick:function(){return t("all","true")},color:"blue",name:"all",content:"All Activities"}),r.a.createElement(w.a.Item,{active:n.has("isGoing"),onClick:function(){return t("isGoing","true")},color:"blue",name:"username",content:"I'm Going"}),r.a.createElement(w.a.Item,{active:n.has("isHost"),onClick:function(){return t("isHost","true")},color:"blue",name:"host",content:"I'm hosting"})),r.a.createElement(bt.a,{icon:"calendar",attached:!0,color:"teal",content:"Select Date"}),r.a.createElement(Lt.Calendar,{onChange:function(e){return t("startDate",e)},value:n.get("startDate")||new Date}))})),Ft=n(901),zt=function(){return r.a.createElement(a.Fragment,null,r.a.createElement(Ft.a,{fluid:!0,style:{marginTop:50}},r.a.createElement(ft.a.Group,null,r.a.createElement(ft.a,{style:{minHeight:110}},r.a.createElement(Ft.a,null,r.a.createElement(Ft.a.Header,{image:!0},r.a.createElement(Ft.a.Line,null),r.a.createElement(Ft.a.Line,null)),r.a.createElement(Ft.a.Paragraph,null,r.a.createElement(Ft.a.Line,null)))),r.a.createElement(ft.a,null,r.a.createElement(Ft.a,null,r.a.createElement(Ft.a.Line,null),r.a.createElement(Ft.a.Line,null))),r.a.createElement(ft.a,{secondary:!0,style:{minHeight:70}}),r.a.createElement(ft.a,{clearing:!0},r.a.createElement(O.a,{disabled:!0,color:"blue",floated:"right",content:"View"})))))},Rt=Object(v.a)((function(){var e=Object(a.useContext)(pt).activityStore,t=e.loadActivities,n=e.isLoadingActivities,i=e.setPageNumber,o=e.currentPageNumber,c=e.totalPages;Object(a.useEffect)((function(){(function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]);var l=function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(o+1),e.next=3,t();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(vt.a,null,r.a.createElement(vt.a.Column,{width:10},n&&0===o?r.a.createElement(zt,null):r.a.createElement(wt.a,{pageStart:0,loadMore:l,hasMore:!n&&o+1<c,initialLoad:!1},r.a.createElement(Pt,null))),r.a.createElement(vt.a.Column,{width:6},r.a.createElement(Ut,null)),r.a.createElement(vt.a.Column,{width:10},r.a.createElement(Tt,{loading:n})))})),Dt=n(905),Nt=function(e){var t=e.message,n=void 0===t?"Loading":t,a=e.inverted,i=void 0===a||a;return r.a.createElement(Dt.a,{active:!0,inverted:i},r.a.createElement(It.a,{content:n}))},_t=n(896),Ht=n(893),Mt=n(29),Vt=function(e){var t=e.input,n=e.width,a=e.rows,i=e.placeholder,o=e.meta,c=o.touched,l=o.error;return r.a.createElement(Ht.a.Field,{error:c&&!!l,width:n},r.a.createElement("textarea",Object.assign({rows:a},t,{placeholder:i})),c&&l&&r.a.createElement(Et.a,{basic:!0,color:"red"},l))},Gt=Object(v.a)((function(){var e=Object(a.useContext)(pt),t=e.activityStore,n=t.addComment,i=t.selectedActivity,o=t.getComments,c=e.activityHubStore,l=c.createHubConnection,s=c.stopHubConnection,u=Object(a.useState)(!1),m=Object(Ot.a)(u,2),p=m[0],d=m[1];return Object(a.useEffect)((function(){if(i)return l(i.id),function(){return s(i.id)}}),[l,s,i]),Object(a.useEffect)((function(){i&&function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,o();case 3:d(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[o,i]),p?r.a.createElement(Tt,{message:"Loading Comment",loading:!0}):r.a.createElement(a.Fragment,null,r.a.createElement(ft.a,{textAlign:"center",attached:"top",inverted:!0,color:"teal",style:{border:"none"}},r.a.createElement(bt.a,null,"Chat about this event")),r.a.createElement(ft.a,{attached:!0},r.a.createElement(_t.a.Group,null,i&&i.comments&&i.comments.map((function(e){return r.a.createElement(_t.a,{key:e.id},r.a.createElement(_t.a.Avatar,{src:e.userImage||"/assets/user.png"}),r.a.createElement(_t.a.Content,null,r.a.createElement(_t.a.Author,{as:j.a,to:"".concat("/profile","/").concat(null===e||void 0===e?void 0:e.userId)},e.userDisplayName),r.a.createElement(_t.a.Metadata,null,r.a.createElement("div",null,L()(e.createdAt).format("dddd Do MMM")," at ",L()(e.createdAt).format("h:mm A"),"  ")),r.a.createElement(_t.a.Text,null,e.body)))})),r.a.createElement(Mt.b,{onSubmit:n,render:function(e){var t=e.handleSubmit,n=e.submitting,a=e.pristine,i=e.form;return r.a.createElement(Ht.a,{onSubmit:function(){return t().then((function(){return i.reset()}))}},r.a.createElement(Mt.a,{name:"Body",component:Vt,rows:2,placeholder:"Add your comment"}),r.a.createElement(O.a,{content:"Add Reply",labelPosition:"left",icon:"edit",primary:!0,loading:n,disabled:a}))}}))))})),qt={filter:"brightness(30%)"},Bt={position:"absolute",bottom:"5%",left:"5%",width:"100%",height:"auto",color:"white"},Wt=Object(v.a)((function(e){var t,n,i=e.activity,o=Object(a.useContext)(pt),c=Object(a.useState)(!1),l=Object(Ot.a)(c,2),s=l[0],u=l[1],m=function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,o.activityStore.attend(i);case 4:return e.prev=4,u(!1),e.finish(4);case 7:case"end":return e.stop()}}),e,null,[[1,,4,7]])})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,o.activityStore.unattend(i);case 4:return e.prev=4,u(!1),e.finish(4);case 7:case"end":return e.stop()}}),e,null,[[1,,4,7]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(ft.a.Group,null,r.a.createElement(ft.a,{basic:!0,attached:"top",style:{padding:"0"}},r.a.createElement(E.a,{src:"/assets/categoryImages/".concat(null===i||void 0===i?void 0:i.category,".jpg"),fluid:!0,style:qt}),r.a.createElement(ft.a,{style:Bt,basic:!0},r.a.createElement(yt.a.Group,null,r.a.createElement(yt.a,null,r.a.createElement(yt.a.Content,null,r.a.createElement(bt.a,{size:"huge",content:null===i||void 0===i?void 0:i.title,style:{color:"white"}}),r.a.createElement("p",null,L()(null===i||void 0===i?void 0:i.date).format("dddd Do MMM")),r.a.createElement("p",null,"Hosted by"," ",r.a.createElement(j.a,{to:"".concat("/profile","/").concat(null===i||void 0===i||null===(t=i.host)||void 0===t?void 0:t.appUserId)},r.a.createElement("strong",null,null===i||void 0===i||null===(n=i.host)||void 0===n?void 0:n.displayName)))))))),r.a.createElement(ft.a,{clearing:!0,attached:"bottom"},!(null===i||void 0===i?void 0:i.isCurrentUserHost)&&!(null===i||void 0===i?void 0:i.isCurrentUserGoing)&&r.a.createElement(O.a,{loading:s,onClick:m,color:"teal"},"Join Activity"),!(null===i||void 0===i?void 0:i.isCurrentUserHost)&&(null===i||void 0===i?void 0:i.isCurrentUserGoing)&&r.a.createElement(O.a,{loading:s,onClick:p},"Cancel attendence"),(null===i||void 0===i?void 0:i.isCurrentUserHost)&&r.a.createElement(O.a,{as:j.a,to:"".concat("/manageactivity","/").concat(null===i||void 0===i?void 0:i.id),color:"orange",floated:"right"},"Manage Event")))})),Jt=function(e){var t=e.activity;return r.a.createElement(ft.a.Group,null,r.a.createElement(ft.a,{attached:"top"},r.a.createElement(vt.a,null,r.a.createElement(vt.a.Column,{width:1},r.a.createElement(jt.a,{size:"large",color:"teal",name:"info"})),r.a.createElement(vt.a.Column,{width:15},r.a.createElement("p",null,null===t||void 0===t?void 0:t.description)))),r.a.createElement(ft.a,{attached:!0},r.a.createElement(vt.a,{verticalAlign:"middle"},r.a.createElement(vt.a.Column,{width:1},r.a.createElement(jt.a,{name:"calendar",size:"large",color:"teal"})),r.a.createElement(vt.a.Column,{width:15},r.a.createElement("span",null,L()(null===t||void 0===t?void 0:t.date).format("dddd Do MMM")," at ",L()(null===t||void 0===t?void 0:t.date).format("h:mm A"))))),r.a.createElement(ft.a,{attached:!0},r.a.createElement(vt.a,{verticalAlign:"middle"},r.a.createElement(vt.a.Column,{width:1},r.a.createElement(jt.a,{name:"marker",size:"large",color:"teal"})),r.a.createElement(vt.a.Column,{width:11},r.a.createElement("span",null,null===t||void 0===t?void 0:t.venue,", ",null===t||void 0===t?void 0:t.city)))))},Yt=Object(v.a)((function(e){var t=e.attendees;return r.a.createElement(a.Fragment,null,r.a.createElement(ft.a,{textAlign:"center",style:{border:"none"},attached:"top",secondary:!0,inverted:!0,color:"teal"},"".concat(null===t||void 0===t?void 0:t.length," ").concat((null===t||void 0===t?void 0:t.length)>1?"People":"Person"," going")),r.a.createElement(ft.a,{attached:!0},r.a.createElement(kt.a,{relaxed:!0,divided:!0},null===t||void 0===t?void 0:t.map((function(e){return r.a.createElement(yt.a,{key:e.appUserId,style:{position:"relative"}},e.isHost&&r.a.createElement(Et.a,{style:{position:"absolute"},color:"orange",ribbon:"right"},"Host"),r.a.createElement(E.a,{size:"tiny",src:e.image||"/assets/user.png"}),r.a.createElement(yt.a.Content,{verticalAlign:"middle"},r.a.createElement(yt.a.Header,{as:"h3"},r.a.createElement(j.a,{to:"".concat("/profile","/").concat(e.appUserId)},e.displayName)),e.following&&r.a.createElement(yt.a.Extra,{style:{color:"orange"}},"Following")))})))))})),Kt=Object(v.a)((function(e){var t=Object(a.useContext)(pt).activityStore,n=t.loadActivity,i=t.selectedActivity;return Object(a.useEffect)((function(){e.match.params.id&&e.match.params.id.length>0&&function(){var t=Object(b.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(e.match.params.id);case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[n,e.match.params.id]),t.isLoadingActivity?r.a.createElement(Nt,{message:"Loading Activity"}):r.a.createElement(vt.a,null,r.a.createElement(vt.a.Column,{width:10},r.a.createElement(Wt,{activity:i}),r.a.createElement(Jt,{activity:i}),r.a.createElement(Gt,null)),r.a.createElement(vt.a.Column,{width:6},r.a.createElement(Yt,{attendees:null===i||void 0===i?void 0:i.attendees})))})),Zt=n(130),$t=n(20),Qt=function e(t){Object(x.a)(this,e),this.id=void 0,this.title="",this.description="",this.category="",this.date=void 0,this.time=void 0,this.city="",this.venue="",Object.assign(this,t),t&&t.date&&(this.time=t.date)},Xt=function(e,t){var n=e.getFullYear(),a=e.getMonth()+1,r=e.getDate(),i="".concat(n,"-").concat(a,"-").concat(r),o=t.getHours()+":"+t.getMinutes()+":00";return new Date(i+" "+o)},en=function(e){var t=e.input,n=e.width,a=e.type,i=e.placeholder,o=e.meta,c=o.touched,l=o.error;return r.a.createElement(Ht.a.Field,{error:c&&!!l,type:a,width:n},r.a.createElement("input",Object.assign({},t,{placeholder:i})),c&&l&&r.a.createElement(Et.a,{basic:!0,color:"red"},l))},tn=n(891),nn=function(e){var t=e.input,n=e.options,a=e.width,i=e.placeholder,o=e.meta,c=o.touched,l=o.error;return r.a.createElement(Ht.a.Field,{error:c&&!!l,width:a},r.a.createElement(tn.a,{placeholder:i,value:t.value,options:n,onChange:function(e,n){return t.onChange(n.value)}}),c&&l&&r.a.createElement(Et.a,{basic:!0,color:"red"},l))},an=function(e){var t=e.input,n=e.width,a=e.date,i=void 0!==a&&a,o=e.time,c=void 0!==o&&o,l=e.placeholder,s=e.meta,u=s.touched,m=s.error;Object(Zt.a)(e,["input","width","date","time","placeholder","meta"]);return r.a.createElement(Ht.a.Field,{error:u&&!!m,width:n},r.a.createElement(Lt.DateTimePicker,{placeholder:l,value:t.value||void 0,onChange:t.onChange,onBlur:t.onBlur,onKeyDown:function(e){return e.preventDefault()},date:i,time:c}),u&&m&&r.a.createElement(Et.a,{basic:!0,color:"red"},m))},rn=[{key:"drinks",text:"Drinks",value:"drinks"},{key:"culture",text:"Culture",value:"culture"},{key:"film",text:"Film",value:"film"},{key:"food",text:"Food",value:"food"},{key:"music",text:"Music",value:"music"},{key:"travel",text:"Travel",value:"travel"}],on=Object($t.combineValidators)({title:Object($t.isRequired)({message:"The Event title is required"}),description:Object($t.composeValidators)(Object($t.isRequired)("Description"),Object($t.hasLengthGreaterThan)(4)({message:"Description needs to be at least 5 characters"}))(),category:Object($t.isRequired)({message:"The Event category is required"}),date:Object($t.isRequired)("Date"),time:Object($t.isRequired)("Time"),city:Object($t.isRequired)("City"),venue:Object($t.isRequired)("Venue")}),cn=Object(v.a)((function(e){var t=Object(a.useContext)(pt).activityStore,n=t.loadActivity,i=Object(a.useState)(new Qt),o=Object(Ot.a)(i,2),c=o[0],l=o[1];Object(a.useEffect)((function(){e.match.params.id&&n(e.match.params.id).then((function(e){l(new Qt(e))}))}),[n,e.match.params.id]);var s=function(e){p.push("".concat("/activities","/").concat(e))},u=function(){c.id?s(c.id):p.push("/activities")},m=function(){var e=Object(b.a)(f.a.mark((function e(n){var a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.date,n.time,(a=Object(Zt.a)(n,["date","time"])).date=Xt(n.date,n.time),!a.id){e.next=9;break}return e.next=5,t.editActivity(a);case 5:e.sent&&s(a.id),e.next=13;break;case 9:return e.next=11,t.createActivity(a);case 11:(r=e.sent)&&""!==r&&(a.id=r,s(r));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(vt.a,null,r.a.createElement(vt.a.Column,{width:10},r.a.createElement(ft.a,{clearing:!0},r.a.createElement(Mt.b,{onSubmit:m,validate:on,initialValues:c,render:function(e){return r.a.createElement(Ht.a,{onSubmit:e.handleSubmit,loading:t.isLoadingActivity},r.a.createElement(Mt.a,{name:"title",placeholder:"Title",value:c.title,component:en}),r.a.createElement(Mt.a,{name:"description",placeholder:"Description",rows:3,value:c.description,component:Vt}),r.a.createElement(Mt.a,{name:"category",placeholder:"Category",value:c.category,component:nn,options:rn}),r.a.createElement(Ht.a.Group,{widths:"equal"},r.a.createElement(Mt.a,{component:an,name:"date",placeholder:"Date",date:!0,value:c.date}),r.a.createElement(Mt.a,{component:an,name:"time",placeholder:"Time",time:!0,value:c.time})),r.a.createElement(Mt.a,{name:"city",placeholder:"City",value:c.city,component:en}),r.a.createElement(Mt.a,{name:"venue",placeholder:"Venue",value:c.venue,component:en}),r.a.createElement(O.a,{floated:"right",type:"Submit",loading:t.isSaving,disabled:t.isLoadingActivity||e.invalid||e.pristine,positive:!0,content:"Submit"}),r.a.createElement(O.a,{onClick:u,floated:"right",type:"Button",disabled:t.isLoadingActivity,content:"Cancel"}))}}))))})),ln=n(91),sn=n(68),un=n(894);!function(e){e.Mini="mini",e.Tiny="tiny",e.Small="small",e.Large="large",e.Fullscreen="fullscreen"}(mt||(mt={}));var mn=function(e){var t={trigger:e.trigger,content:e.content,title:e.title,actions:e.actions,closeIcon:e.closeIcon||!0,closeOnDocumentClick:e.closeOnDocumentClick||!1,closeOnDimmerClick:e.closeOnDocumentClick||!1,closeOnEscape:e.closeOnEscape||!1,open:e.open,size:e.size||mt.Large,defaultOpen:e.defaultOpen||!1,onClose:e.onClose,onOpen:e.onOpen,onActionClick:e.onActionClick};return r.a.createElement(un.a,{closeIcon:t.closeIcon,defaultOpen:t.defaultOpen,closeOnDimmerClick:t.closeOnDimmerClick,closeOnDocumentClick:t.closeOnDocumentClick,closeOnEscape:t.closeOnEscape,size:t.size,open:t.open,onOpen:function(e,n){t.onOpen&&t.onOpen(e,n)},onClose:function(e,n){e.preventDefault(),t.onClose&&t.onClose(e,n)},onActionClick:function(e,n){t.onActionClick&&t.onActionClick(e,n)}},t.title&&r.a.createElement(un.a.Header,null,t.title),r.a.createElement(un.a.Content,null,t.content),t.actions&&r.a.createElement(un.a.Actions,null,t.actions))},pn=n(902),dn=function(e){return r.a.createElement(pn.a,{negative:!0},r.a.createElement(pn.a.Header,null,e.error.statusText),e.error.data&&Object.keys(e.error.data).length>0&&r.a.createElement(pn.a.List,null,Object.values(e.error.data.errors).flat().map((function(e,t){return r.a.createElement(pn.a.Item,{key:t},e)}))),e.text&&r.a.createElement(pn.a.Content,null,e.text))},fn=function(){var e=Object(a.useContext)(pt).userStore,t=Object($t.combineValidators)({userName:Object($t.isRequired)("User name"),password:Object($t.isRequired)("Password")}),n=function(){p.push("/")};Object(a.useEffect)((function(){e.canAccessSecureResource&&n()}),[e.canAccessSecureResource]);var i=function(){var t=Object(b.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.login(n);case 3:p.push("/activities"),t.next=9;break;case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",Object(ln.a)({},sn.a,t.t0.statusText));case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(a.Fragment,null,r.a.createElement(mn,{defaultOpen:!0,content:r.a.createElement(Mt.b,{onSubmit:i,validate:t,render:function(e){return r.a.createElement(Ht.a,null,r.a.createElement(bt.a,{as:"h2",content:"Login to Social Network",color:"teal",textAlign:"center"}),r.a.createElement(Mt.a,{name:"userName",component:en,placeholder:"User Name"}),r.a.createElement(Mt.a,{name:"password",type:"Password",component:en,placeholder:"Password"}),e.submitError&&!e.dirtySinceLastSubmit&&r.a.createElement(dn,{error:e.submitError,text:"Invalid user name or password"}),r.a.createElement(O.a,{loading:e.submitting,disabled:e.invalid&&!e.dirtySinceLastSubmit||e.pristine,onClick:e.handleSubmit,content:"Login",color:"teal",fluid:!0}))}}),onClose:n,size:mt.Tiny}))},bn=Object($t.createValidator)((function(e){return function(t){if(t&&!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t))return e}}),"Invalid email address"),hn=Object($t.createValidator)((function(e){return function(t){if(t&&!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[#$^+=!*()@%&]).{6,10}$$/g.test(t))return e}}),"Password requires atleast 1 lower case letter, 1 capital letter, 1 digit, 1 special character and the length should be between 6-10 characters."),vn=function(){var e=Object(a.useContext)(pt).userStore,t=Object($t.combineValidators)({firstName:Object($t.composeValidators)(Object($t.isRequired)("First name"),Object($t.hasLengthGreaterThan)(1)({message:"First name must contain atleast 2 characters!"}),Object($t.hasLengthLessThan)(25)({message:"First name must be 24 characters or less!"}))(),lastName:Object($t.composeValidators)(Object($t.isRequired)("Last name"),Object($t.hasLengthGreaterThan)(1)({message:"Last name must contain atleast 2 characters!"}),Object($t.hasLengthLessThan)(25)({message:"Last name must be 24 characters or less!"}))(),email:Object($t.composeValidators)(Object($t.isRequired)("Email"),bn)(),userName:Object($t.composeValidators)(Object($t.isRequired)("User name"),Object($t.hasLengthGreaterThan)(5)({message:"User name must contain atleast 6 characters!"}),Object($t.hasLengthLessThan)(25)({message:"User name must be 24 characters or less!"}))(),password:Object($t.composeValidators)(Object($t.isRequired)("Password"),Object($t.hasLengthGreaterThan)(5)({message:"Password must contain atleast 6 characters!"}),Object($t.hasLengthLessThan)(11)({message:"Password must be 10 characters or less!"}),hn)()}),n=function(){var t=Object(b.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.register(n);case 3:p.push("/"),t.next=9;break;case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",Object(ln.a)({},sn.a,t.t0));case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(mn,{defaultOpen:!0,content:r.a.createElement(Mt.b,{onSubmit:n,validate:t,render:function(e){return r.a.createElement(Ht.a,null,r.a.createElement(bt.a,{as:"h2",content:"Register",color:"teal",textAlign:"center"}),r.a.createElement(Mt.a,{name:"firstName",component:en,placeholder:"First Name"}),r.a.createElement(Mt.a,{name:"lastName",component:en,placeholder:"Last Name"}),r.a.createElement(Mt.a,{name:"email",component:en,placeholder:"Email"}),r.a.createElement(Mt.a,{name:"userName",component:en,placeholder:"User Name"}),r.a.createElement(Mt.a,{name:"password",type:"Password",component:en,placeholder:"Password"}),e.submitError&&!e.dirtySinceLastSubmit&&r.a.createElement(dn,{error:e.submitError}),r.a.createElement(O.a,{loading:e.submitting,disabled:e.invalid&&!e.dirtySinceLastSubmit||e.pristine,onClick:e.handleSubmit,content:"Register",color:"teal",fluid:!0}))}}),onClose:function(){p.push("/")},size:mt.Tiny})},gn=n(904),wn=n(892),On=n(908),En=Object(v.a)((function(){var e,t=Object(a.useContext)(pt),n=Object(a.useState)(!1),i=Object(Ot.a)(n,2),o=i[0],c=i[1],l=t.profileStore,s=l.userProfile,u=l.follow,m=l.unfollow,p=l.isViewingOwnProfile,d=function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c(!0),!s.following){e.next=6;break}return e.next=4,m(s.appUserId);case 4:e.next=8;break;case 6:return e.next=8,u(s.appUserId);case 8:c(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(ft.a,null,r.a.createElement(vt.a,null,r.a.createElement(vt.a.Column,{width:12},r.a.createElement(yt.a.Group,null,r.a.createElement(yt.a,null,r.a.createElement(yt.a.Image,{avatar:!0,size:"small",src:(null===s||void 0===s||null===(e=s.mainPhoto)||void 0===e?void 0:e.url)||"/assets/user.png"}),r.a.createElement(yt.a.Content,{verticalAlign:"middle"},r.a.createElement(bt.a,{as:"h1"},null===s||void 0===s?void 0:s.displayName))))),r.a.createElement(vt.a.Column,{width:4},r.a.createElement(gn.a.Group,{widths:2},r.a.createElement(gn.a,{label:"Followers",value:null===s||void 0===s?void 0:s.followersCount}),r.a.createElement(gn.a,{label:"Following",value:null===s||void 0===s?void 0:s.followingCount})),s&&!p?r.a.createElement(a.Fragment,null,r.a.createElement(wn.a,null),r.a.createElement(On.a,{animated:"move"},r.a.createElement(a.Fragment,null,r.a.createElement(On.a.Content,{hidden:!0},r.a.createElement(O.a,{onClick:function(){return d()},content:s.following?"Unfollow":"Follow",loading:o,className:s.following?"negative":"positive",fluid:!0,basic:!0})),")",r.a.createElement(On.a.Content,{visible:!0,style:{width:"100%"}},r.a.createElement(O.a,{content:s.following?"Following":"Not following",fluid:!0,color:"teal"}))))):"")))})),yn=n(909),jn=n(900),kn=n(473),xn={border:"dashed 3px",borderColor:"#eee",borderRadius:"5px",paddingTop:"30px",textAlign:"center",height:"200px"},Sn={borderColor:"teal"},Cn=function(e){var t=e.setFiles,n=Object(a.useCallback)((function(e){var n=e.map((function(e){return console.log(typeof e),{file:e,preview:URL.createObjectURL(e)}}));console.log(n),t(n)}),[t]),i=Object(kn.a)({onDrop:n}),o=i.getRootProps,c=i.getInputProps,l=i.isDragActive;return r.a.createElement("div",Object.assign({},o(),{style:l?Object(it.a)(Object(it.a)({},xn),Sn):xn}),r.a.createElement("input",c()),r.a.createElement(jt.a,{name:"upload",size:"huge"}),r.a.createElement(bt.a,{content:"Drop image here"}))},An=n(472),Pn=n.n(An),In=(n(875),function(e){var t=Object(a.useRef)(null);return r.a.createElement(Pn.a,{ref:t,src:e.previewImage,style:{height:200,width:"100%"},aspectRatio:1,preview:".img-preview",guides:!1,viewMode:1,dragMode:"move",scalable:!0,cropBoxMovable:!0,cropBoxResizable:!0,crop:function(){if(t&&t.current){if("undefined"===typeof t.current.getCroppedCanvas())return;t.current.getCroppedCanvas().toBlob((function(t){e.setImage(t)}),"image/jpeg")}}})}),Tn=function(e){var t=e.uploadPhoto,n=Object(a.useState)([]),i=Object(Ot.a)(n,2),o=i[0],c=i[1],l=Object(a.useState)(null),s=Object(Ot.a)(l,2),u=s[0],m=s[1],p=Object(a.useState)(!1),d=Object(Ot.a)(p,2),h=d[0],v=d[1],g=function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.next=3,t(u);case 3:v(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){return function(){o.forEach((function(e){URL.revokeObjectURL(e.preview)}))}}),[o]),r.a.createElement(vt.a,null,r.a.createElement(vt.a.Column,{width:4},r.a.createElement(bt.a,{sub:!0,color:"teal",content:"Step 1 - Add Photo"}),r.a.createElement(Cn,{setFiles:c})),r.a.createElement(vt.a.Column,{width:1}),r.a.createElement(vt.a.Column,{width:4},r.a.createElement(bt.a,{sub:!0,color:"teal",content:"Step 2 - Resize Image"}),o&&o.length>0&&r.a.createElement(In,{setImage:m,previewImage:o[0].preview})),r.a.createElement(vt.a.Column,{width:1}),r.a.createElement(vt.a.Column,{width:4},r.a.createElement(bt.a,{sub:!0,color:"teal",content:"Step 3 - Preview & Upload"}),o&&o.length>0&&r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"img-preview",style:{minHeight:200,overflow:"hidden"}}," "),r.a.createElement(O.a.Group,{widths:2},r.a.createElement(O.a,{loading:h,onClick:function(){return g()},icon:"check",positive:!0}),r.a.createElement(O.a,{disabled:h,onClick:function(){return c([])},icon:"close"})))))},Ln=Object(v.a)((function(){var e=Object(a.useContext)(pt).profileStore,t=e.userProfile,n=e.isViewingOwnProfile,i=e.uploadPhoto,o=e.setMainPhoto,c=e.deletePhoto,l=Object(a.useState)(!1),s=Object(Ot.a)(l,2),u=s[0],m=s[1],p=Object(a.useState)(!1),d=Object(Ot.a)(p,2),h=d[0],v=d[1],g=Object(a.useState)(!1),w=Object(Ot.a)(g,2),y=w[0],j=w[1],k=Object(a.useState)(""),x=Object(Ot.a)(k,2),S=x[0],C=x[1],A=function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(t);case 2:m(!1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(b.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(t.currentTarget.name),v(!0),e.next=4,o(n);case 4:v(!1);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),I=function(){var e=Object(b.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(t.currentTarget.name),j(!0),e.next=4,c(n);case 4:j(!1);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return r.a.createElement(yn.a.Pane,null,r.a.createElement(vt.a,null,r.a.createElement(vt.a.Column,{width:16,style:{paddingBottom:0}},r.a.createElement(bt.a,{floated:"left",icon:"image",content:"Photos"}),n&&r.a.createElement(O.a,{onClick:function(){m(!u)},floated:"right",primary:!0,basic:!0,content:u?"Cancel":"Add Photo"})),r.a.createElement(vt.a.Column,{width:16},u?r.a.createElement("div",null,r.a.createElement(Tn,{uploadPhoto:A})):r.a.createElement(jn.a.Group,{itemsPerRow:5},t&&t.photos&&t.photos.map((function(e){var a,i;return r.a.createElement(jn.a,{key:e.id},r.a.createElement(jn.a.Content,null,r.a.createElement(E.a,{src:e.url})),r.a.createElement(jn.a.Content,{extra:!0,style:{padding:0}},r.a.createElement(O.a.Group,{fluid:!0,widths:2},r.a.createElement(O.a,{name:e.id,onClick:function(t){return P(t,e.id)},loading:h&&S===e.id,disabled:!n||(null===(a=t.mainPhoto)||void 0===a?void 0:a.id)===e.id,basic:!0,positive:!0,content:"Main"}),r.a.createElement(O.a,{name:e.id,onClick:function(t){return I(t,e.id)},loading:y&&S===e.id,disabled:!n||(null===(i=t.mainPhoto)||void 0===i?void 0:i.id)===e.id,basic:!0,negative:!0,icon:"trash"}))))}))))))})),Un=Object(v.a)((function(e){var t=e.updateProfile,n=e.userProfile,i=e.setEditMode,o=Object(a.useState)(!1),c=Object(Ot.a)(o,2),l=c[0],s=c[1],u=function(){var e=Object(b.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),e.next=4,t(n);case 4:i(!1),s(!1),e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",Object(ln.a)({},sn.a,e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),m=Object($t.combineValidators)({firstName:Object($t.composeValidators)(Object($t.isRequired)("First name"),Object($t.hasLengthGreaterThan)(1)({message:"First name must contain atleast 2 characters!"}),Object($t.hasLengthLessThan)(25)({message:"First name must be 24 characters or less!"}))(),lastName:Object($t.composeValidators)(Object($t.isRequired)("Last name"),Object($t.hasLengthGreaterThan)(1)({message:"Last name must contain atleast 2 characters!"}),Object($t.hasLengthLessThan)(25)({message:"Last name must be 24 characters or less!"}))(),email:Object($t.composeValidators)(Object($t.isRequired)("Email"),bn)(),bio:Object($t.hasLengthLessThan)(241)({message:"Bio must be 240 characters or less!"})});return n?r.a.createElement(Mt.b,{onSubmit:u,validate:m,initialValues:n,render:function(e){return r.a.createElement(Ht.a,{onSubmit:e.handleSubmit},r.a.createElement(Mt.a,{name:"firstName",component:en,value:null===n||void 0===n?void 0:n.firstName,placeholder:"First Name"}),r.a.createElement(Mt.a,{name:"lastName",component:en,value:null===n||void 0===n?void 0:n.lastName,placeholder:"Last Name"}),r.a.createElement(Mt.a,{name:"email",component:en,value:null===n||void 0===n?void 0:n.email,placeholder:"Email"}),r.a.createElement(Mt.a,{name:"bio",component:Vt,value:null===n||void 0===n?void 0:n.bio,placeholder:"bio"}),r.a.createElement(O.a,{floated:"right",type:"Submit",loading:l,disabled:e.invalid||e.pristine,positive:!0,content:"Submit"}))}}):r.a.createElement(yn.a.Pane,null,"Loading user profile data")})),Fn=function(){var e=Object(a.useContext)(pt).profileStore,t=e.userProfile,n=e.isViewingOwnProfile,i=e.updateProfile,o=Object(a.useState)(!1),c=Object(Ot.a)(o,2),l=c[0],s=c[1];return r.a.createElement(yn.a.Pane,null,r.a.createElement(vt.a,null,r.a.createElement(vt.a.Column,{width:16},r.a.createElement(bt.a,{floated:"left",icon:"user",content:"About ".concat(null===t||void 0===t?void 0:t.displayName)}),n&&r.a.createElement(O.a,{floated:"right",basic:!0,content:l?"Cancel":"Edit Profile",onClick:function(){return s(!l)}})),r.a.createElement(vt.a.Column,{width:16},l?r.a.createElement(Un,{setEditMode:s,updateProfile:i,userProfile:t}):r.a.createElement(jn.a,{fluid:!0},r.a.createElement(jn.a.Content,null,r.a.createElement(jn.a.Description,null,null===t||void 0===t?void 0:t.bio)),r.a.createElement(jn.a.Content,{extra:!0},r.a.createElement(jt.a,{name:"mail"}),null===t||void 0===t?void 0:t.email)))))},zn=[{menuItem:"Future Events",pane:{key:"futureEvents"}},{menuItem:"Past Events",pane:{key:"pastEvents"}},{menuItem:"Hosting",pane:{key:"hosted"}}],Rn=Object(v.a)((function(){var e=Object(a.useState)(!1),t=Object(Ot.a)(e,2),n=t[0],i=t[1],o=Object(a.useContext)(pt).profileStore,c=o.loadUserActivities,l=o.userProfile,s=o.userActivities;Object(a.useEffect)((function(){(function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,c(l.appUserId,"");case 3:i(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[c,l]);return r.a.createElement(yn.a.Pane,{loading:n},r.a.createElement(vt.a,null,r.a.createElement(vt.a.Column,{width:16},r.a.createElement(bt.a,{floated:"left",icon:"calendar",content:"Activities"})),r.a.createElement(vt.a.Column,{width:16},r.a.createElement(yn.a,{panes:zn,menu:{secondary:!0,pointing:!0},onTabChange:function(e,t){return function(e,t){var n;switch(i(!0),t.activeIndex){case 1:n="past";break;case 2:n="hosting";break;default:n="future"}c(l.appUserId,n).then((function(){i(!1)}))}(0,t)}}),r.a.createElement("br",null),r.a.createElement(jn.a.Group,{itemsPerRow:4},s&&s.map((function(e){return r.a.createElement(jn.a,{as:j.a,to:"".concat("/activities","/").concat(e.activityId),key:e.activityId},r.a.createElement(E.a,{src:"/assets/categoryImages/".concat(e.category,".jpg"),style:{minHeight:100,objectFit:"cover"}}),r.a.createElement(jn.a.Content,null,r.a.createElement(jn.a.Header,{textAlign:"center"},e.title),r.a.createElement(jn.a.Meta,{textAlign:"center"},r.a.createElement("div",null,L()(e.date).format("MMM Do YYYY")),r.a.createElement("div",null,L()(e.date).format("h:mm A")))))}))))))})),Dn=Object(v.a)((function(e){var t,n=e.profile,a=e.isFollowersTab;return r.a.createElement(jn.a,{as:j.a,to:"".concat("/profile","/").concat(n.appUserId)},r.a.createElement(E.a,{src:(null===(t=n.mainPhoto)||void 0===t?void 0:t.url)||"/assets/user.png"}),r.a.createElement(jn.a.Content,null,r.a.createElement(jn.a.Header,null,n.displayName)),r.a.createElement(jn.a.Content,{extra:!0},r.a.createElement("div",null,r.a.createElement(jt.a,{name:"user"}),"".concat(a?n.followersCount:n.followingCount))))})),Nn=Object(v.a)((function(){var e=Object(a.useContext)(pt).profileStore,t=e.userProfile,n=e.isLoadingfollowers,i=e.followers,o=e.isUserViewingFollowersTab;return r.a.createElement(yn.a.Pane,{loading:n},r.a.createElement(vt.a,null,r.a.createElement(vt.a.Column,{width:16},r.a.createElement(bt.a,{floated:"left",icon:"user",content:"".concat(t.displayName,o?" is followed by below users":" is following below users.")})),r.a.createElement(vt.a.Column,{width:16},r.a.createElement(jn.a.Group,{itemsPerRow:5},i&&i.length>0&&(null===i||void 0===i?void 0:i.map((function(e){return r.a.createElement(Dn,{key:e.appUserId,profile:e,isFollowersTab:o})})))))))})),_n=Object(v.a)((function(){var e=Object(a.useContext)(pt);return r.a.createElement(yn.a,{menu:{fluid:!0,vertical:!0},menuPosition:"right",panes:[{menuItem:"About",render:function(){return r.a.createElement(Fn,null)}},{menuItem:"Photos",render:function(){return r.a.createElement(Ln,null)}},{menuItem:"Activities",render:function(){return r.a.createElement(Rn,null)}},{menuItem:"Followers",render:function(){return r.a.createElement(Nn,null)}},{menuItem:"Following",render:function(){return r.a.createElement(Nn,null)}}],onTabChange:function(t,n){return e.profileStore.setActiveTab(n.activeIndex)}})})),Hn=Object(v.a)((function(e){var t=Object(a.useContext)(pt).profileStore.getUserProfile,n=Object(a.useState)(!1),i=Object(Ot.a)(n,2),o=i[0],c=i[1];return Object(a.useEffect)((function(){(function(){var n=Object(b.a)(f.a.mark((function n(){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c(!0),n.next=3,t(e.match.params.appUserId);case 3:c(!1);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}})()()}),[t,e.match.params.appUserId]),o?r.a.createElement(Nt,{message:"Loading Profile"}):r.a.createElement(a.Fragment,null,r.a.createElement(En,null),r.a.createElement(_n,null))})),Mn=function(){return r.a.createElement(ft.a,{placeholder:!0},r.a.createElement(bt.a,{icon:!0},r.a.createElement(jt.a,{name:"search"}),"Oops, We've found everywhere but we could not find this."),r.a.createElement(ft.a.Inline,null,r.a.createElement(O.a,{as:j.a,to:"/activities",primary:!0},"Return to Activity Page")))},Vn=Object(v.a)((function(e){var t=e.component,n=Object(Zt.a)(e,["component"]),i=Object(a.useContext)(pt).userStore.canAccessSecureResource;return r.a.createElement(c.b,Object.assign({},n,{render:function(e){return i?r.a.createElement(t,e):r.a.createElement(c.a,{to:"/Login"})}}))})),Gn=Object(c.h)(Object(v.a)((function(e){var t=e.location,n=Object(a.useContext)(pt),i=n.commonStore,o=n.userStore.current;return Object(a.useEffect)((function(){!i.getToken()?i.setAppLoaded():function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().finally((function(){return i.setAppLoaded()}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[o,i]),i.appLoaded?r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{position:"bottom-right"}),r.a.createElement(c.b,{path:"/",exact:!0,component:ht}),r.a.createElement(c.b,{path:"/(.+)",render:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(dt,null),r.a.createElement(h.a,{style:{marginTop:"7em"}},r.a.createElement(c.d,null,r.a.createElement(Vn,{path:"/activities",exact:!0,component:Rt}),r.a.createElement(Vn,{path:"".concat("/activities","/:id"),exact:!0,component:Kt}),r.a.createElement(Vn,{key:t.key,exact:!0,path:["/createactivity","".concat("/manageactivity","/:id")],component:cn}),r.a.createElement(Vn,{path:"".concat("/profile","/:appUserId"),component:Hn}),r.a.createElement(c.b,{path:"/Login",component:fn}),r.a.createElement(c.b,{path:"/Register",component:vn}),r.a.createElement(c.b,{component:Mn}))))}})):r.a.createElement(Nt,{message:"Loading Application..."})})));s()(),o.a.render(r.a.createElement(c.c,{history:p},r.a.createElement(r.a.Fragment,null,r.a.createElement(u,null),r.a.createElement(Gn,null))),document.querySelector("#root"))}},[[486,1,2]]]);
//# sourceMappingURL=main.e8e5e98a.chunk.js.map